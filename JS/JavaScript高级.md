# åŸºç¡€æ€»ç»“æ·±å…¥

## æ•°æ®ç±»å‹çš„åˆ†ç±»å’Œåˆ¤æ–­

### æ•°æ®ç±»å‹çš„åˆ†ç±»

æ•°æ®ç±»å‹åˆ†ç±»

* åŸºæœ¬(å€¼)ç±»å‹
  * Number ----- ä»»æ„æ•°å€¼ -------- ==typeof==
  * String ----- ä»»æ„å­—ç¬¦ä¸² ------ ==typeof==
  * Boolean ---- true/false ----- ==typeof==
  * undefined --- undefined ----- ==typeof==/`===`
  * null -------- null ---------- `===`
* å¯¹è±¡(å¼•ç”¨)ç±»å‹
  * Object ----- ==typeof/instanceof==
  * Array ------ ==instanceof==
  * Function ---- ==typeof==

### æ•°æ®ç±»å‹åˆ¤æ–­

typeof

1. è¿”å›æ•°æ®ç±»å‹çš„==å­—ç¬¦ä¸²è¡¨è¾¾==ï¼›

   ```js
   var a;
   console.log(typeof a) // 'undefined'
   ```

2. å¯ä»¥åŒºåˆ«ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€undefinedã€functionï¼›

3. ä¸èƒ½åŒºåˆ«ï¼šnullä¸objectã€ä¸€èˆ¬objectä¸arrayã€‚

instanceof

> æ˜¯å¦æ˜¯è¯¥æ„é€ å‡½æ•°çš„å®ä¾‹

- ä¸“é—¨ç”¨æ¥åˆ¤æ–­å¯¹è±¡æ•°æ®çš„ç±»å‹ï¼šObjectã€Arrayä¸Functionã€‚

**===**

- å¯ä»¥åˆ¤æ–­ï¼šundefinedå’Œnullã€‚



![img](https://img-blog.csdnimg.cn/20210125142526467.png)

![img](https://img-blog.csdnimg.cn/20210125144616228.png)

### å˜é‡ç±»å‹æ•°æ®ç±»å‹

> jsçš„å˜é‡æœ¬èº«æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå˜é‡çš„ç±»å‹å®é™…ä¸Šæ˜¯å˜é‡å†…å­˜ä¸­æ•°æ®çš„ç±»å‹ï¼ˆjsæ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼‰ã€‚var a; åˆ¤æ–­å˜é‡ç±»å‹ï¼Œå®é™…ä¸Š æ˜¯åˆ¤æ–­å€¼çš„ç±»å‹ã€‚

æ•°æ®çš„ç±»å‹ï¼ˆæ•°æ®å¯¹è±¡ï¼‰ï¼š

1. åŸºæœ¬ç±»å‹
2. å¯¹è±¡ç±»å‹

å˜é‡çš„ç±»å‹ï¼ˆå˜é‡å†…å­˜å€¼çš„ç±»å‹ï¼‰ï¼š

   * åŸºæœ¬ç±»å‹ï¼šä¿å­˜åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼ˆä¿å­˜åŸºæœ¬ç±»å‹æ•°æ®çš„å˜é‡ï¼‰ã€‚
   * å¼•ç”¨ç±»å‹ï¼šä¿å­˜å¯¹è±¡åœ°å€å€¼ï¼ˆä¿å­˜å¯¹è±¡åœ°å€å€¼çš„å˜é‡ï¼‰ã€‚



### ç›¸å…³é—®é¢˜

#### å®ä¾‹

> ä½¿ç”¨åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºä¸€ç±»å¯¹è±¡ï¼Œä¹Ÿå°†ä¸€ä¸ªæ„é€ å‡½æ•°ç§°ä¸ºä¸€ä¸ªç±»ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œç§°ä¸ºæ˜¯è¯¥ç±»çš„å®ä¾‹ã€‚

#### undefinedä¸nullçš„åŒºåˆ«ï¼Ÿ

> undefinedä»£è¡¨å®šä¹‰æœªèµ‹å€¼ï¼›null==å®šä¹‰å¹¶èµ‹å€¼==ï¼Œåªæ˜¯å€¼ä¸ºnullã€‚
>
> ![img](https://img-blog.csdnimg.cn/20210125191350603.png)

#### ä»€ä¹ˆæ—¶å€™å˜é‡èµ‹å€¼ä¸ºnullå‘¢ï¼Ÿ

1. åˆå§‹èµ‹å€¼ï¼Œè¡¨æ˜å°†è¦èµ‹å€¼ä¸ºå¯¹è±¡ï¼›(å°†è¦ä½œä¸ºå¼•ç”¨å˜é‡ä½¿ç”¨, ä½†å¯¹è±¡è¿˜æ²¡æœ‰ç¡®å®š)
2. ç»“æŸå‰ï¼Œè®©å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡ï¼ˆè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼‰ã€‚

```js
var a = null 	// aå°†æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¯¹è±¡æ­¤æ—¶è¿˜æ²¡æœ‰ç¡®å®š
a = null 	// è®©aæŒ‡å‘çš„å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡
```

![img](https://img-blog.csdnimg.cn/20210125191816377.png)





## æ•°æ® & å˜é‡ & å†…å­˜

#### æ•°æ®

>  \* ç®—æœ¯è¿ç®—
>  \* é€»è¾‘è¿ç®—
>  \* èµ‹å€¼
>  \* è¿è¡Œå‡½æ•°ï¼ˆè°ƒç”¨å‡½æ•°ä¼ å‚ï¼‰
>  ...

* æ•°æ®çš„ç‰¹ç‚¹ï¼šå…·æœ‰å¯è¯»ã€å¯ä¼ é€’ã€å¯è¿ç®—çš„åŸºæœ¬ç‰¹æ€§ã€‚
* ä¸€åˆ‡çš†æ•°æ®, å‡½æ•°ä¹Ÿæ˜¯æ•°æ®
* åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰æ“ä½œçš„ç›®æ ‡: æ•°æ®

#### å˜é‡

- åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å®ƒçš„å€¼æ˜¯å…è®¸æ”¹å˜çš„é‡

* ä¸€ä¸ªå˜é‡å¯¹åº”ä¸€å—å°å†…å­˜, å®ƒçš„å€¼ä¿å­˜åœ¨æ­¤å†…å­˜ä¸­  

#### å†…å­˜

> å†…å­˜äº§ç”Ÿå’Œæ­»äº¡: 
>
> - å†…å­˜æ¡(é›†æˆç”µè·¯æ¿)â€”â€”>é€šç”µâ€”â€”>äº§ç”Ÿä¸€å®šå®¹é‡çš„å­˜å‚¨(å†…å­˜)ç©ºé—´â€”â€”>å­˜å‚¨å„ç§æ•°æ®â€”â€”>å¤„ç†æ•°æ®â€”â€”>æ–­ç”µâ€”â€”>å†…å­˜å’Œæ•°æ®å…¨éƒ¨æ¶ˆå¤±
>
> å†…å­˜çš„ç©ºé—´æ˜¯ä¸´æ—¶çš„, è€Œç¡¬ç›˜çš„ç©ºé—´æ˜¯æŒä¹…çš„

* å†…å­˜æ¡é€šç”µåäº§ç”Ÿçš„å­˜å‚¨ç©ºé—´(ä¸´æ—¶çš„)
* ä¸€å—å†…å­˜åŒ…å«2ä¸ªæ–¹é¢çš„æ•°æ®
  * å†…éƒ¨å­˜å‚¨çš„æ•°æ®(ä¸€èˆ¬æ•°æ®/åœ°å€æ•°æ®)
  * åœ°å€å€¼æ•°æ®
* å†…å­˜ç©ºé—´çš„åˆ†ç±»
  * æ ˆç©ºé—´: å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ (ç©ºé—´è¾ƒå°)
  * å †ç©ºé—´: å¯¹è±¡  (ç©ºé—´è¾ƒå¤§)

#### ä¸‰è€…ä¹‹é—´çš„å…³ç³»

* å†…å­˜æ˜¯å®¹å™¨, ç”¨æ¥å­˜å‚¨ä¸åŒæ•°æ®
* å˜é‡æ˜¯å†…å­˜çš„æ ‡è¯†, é€šè¿‡å˜é‡æˆ‘ä»¬å¯ä»¥æ“ä½œ(è¯»/å†™)å†…å­˜ä¸­çš„æ•°æ®  

#### ç›¸å…³é—®é¢˜

> æƒ…å†µè®¨è®ºï¼švar a = xxxï¼ˆèµ‹å€¼æ“ä½œï¼‰ï¼Œaå†…å­˜ä¸­åˆ°åº•ä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ
> é—®é¢˜ï¼švar a = xxxï¼ˆèµ‹å€¼æ“ä½œï¼‰ï¼Œaå†…å­˜ä¸­åˆ°åº•ä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ

1. xxxæ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ï¼Œä¿å­˜çš„å°±æ˜¯è¿™ä¸ªæ•°æ®ã€‚
2. xxxæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¿å­˜çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ã€‚
3. xxxæ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¿å­˜çš„xxxçš„å†…å­˜å†…å®¹ï¼ˆä¿å­˜çš„å¯èƒ½æ˜¯åŸºæœ¬æ•°æ®ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ°å€å€¼æ•°æ®ï¼‰ã€‚

> å…³äºå¼•ç”¨å˜é‡èµ‹å€¼é—®é¢˜

- 2ä¸ªå¼•ç”¨å˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼ˆä¿å­˜çš„å†…å®¹æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„åœ°å€å€¼ï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªå¼•ç”¨å˜é‡ä¿®æ”¹å¯¹è±¡å†…éƒ¨æ•°æ®ï¼Œå¦ä¸€ä¸ªå¼•ç”¨å˜é‡ä¹Ÿçœ‹å¾—è§ï¼ˆçœ‹è§çš„æ˜¯ä¿®æ”¹ä¹‹åçš„æ•°æ®ï¼‰ã€‚

  ```js
  var obj1 = { name: "Tom"}
  var obj2 = obj1
  obj1.name = "å¼ ä¸‰"
  console.log(obj2.name)	//æ‰“å°è¾“å‡º "å¼ ä¸‰"
  
  function fn(obj){
      obj.name = "æå››"
  }
  fn(obj2)
  console.log(obj1.name)	//æ‰“å°è¾“å‡º "æå››"
  ```

- 2ä¸ªå¼•ç”¨å˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œè®©ä¸€ä¸ªå¼•ç”¨å˜é‡æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¦ä¸€ä¸ªå¼•ç”¨å˜é‡è¿˜æ˜¯æŒ‡å‘åŸæ¥çš„å¯¹è±¡

  ```js
  var a = { age: 12}
  var b = a 
  a = { name:"å¼ ä¸‰",age:14 }
  b.age = 18
  console.log( b.age, a.name, a.age)	//æ‰“å°è¾“å‡º 18 "å¼ ä¸‰" 14
  
  function fn(obj){
      obj = { age: 66 }
  }
  fn(b)
  console.log(b.age)	//æ‰“å°è¾“å‡º 18
  ```





## å‡½æ•°

> ç”¨æ¥å®ç°ç‰¹å®šåŠŸèƒ½çš„, næ¡è¯­å¥çš„å°è£…ä½“ï¼Œåªæœ‰å‡½æ•°ç±»å‹çš„æ•°æ®æ˜¯å¯ä»¥æ‰§è¡Œçš„, å…¶å®ƒçš„éƒ½ä¸å¯ä»¥

ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°?

* æé«˜å¤ç”¨æ€§
* ä¾¿äºé˜…è¯»äº¤æµ

å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡â€”â€”`Function instanceof Object===true`

å‡½æ•°çš„3ç§ä¸åŒè§’è‰²

* ä¸€èˆ¬å‡½æ•° : ç›´æ¥è°ƒç”¨  ==test()==
* æ„é€ å‡½æ•° : é€šè¿‡newè°ƒç”¨   ==new test()==
* å¯¹è±¡(==obj.test()==) : é€šè¿‡è°ƒç”¨å†…éƒ¨çš„å±æ€§/æ–¹æ³•   ==test.call/apply(obj)==

### å›è°ƒå‡½æ•°

> å›è°ƒå‡½æ•° ï¼š å‡½æ•°ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ åˆ°å¦ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œå½“é‚£ä¸ªå‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œåœ¨æ‰§è¡Œä¼ è¿›å»çš„è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšå›è°ƒ
>
> 1. ä½ å®šä¹‰de
> 2. æ²¡æœ‰è°ƒç”¨å‡½æ•°
> 3. æœ€ç»ˆæ‰§è¡Œï¼ˆåœ¨æŸä¸ªæ—¶åˆ»æˆ–æŸä¸ªæ¡ä»¶ä¸‹ï¼‰

##### domäº‹ä»¶å›è°ƒå‡½æ•°

> PSï¼šthis ==ã€‹å‘ç”Ÿäº‹ä»¶çš„domå…ƒç´ 

```js
document.getElementById('btn').onclick = function (){
	alert(this.innerHTML)
}
```

##### å®šæ—¶å™¨å›è°ƒå‡½æ•°

> PSï¼šthis ==ã€‹window

```js
setTimeout(function (){
	alert("åˆ°ç‚¹äº†")
},2000)
```

###### window.setTimeout

- ç”¨æ³•ï¼šwindow.setTimeout(è°ƒç”¨å‡½æ•°,å»¶æ—¶æ—¶é—´)=>å›è°ƒå‡½æ•°
- å»¶æ—¶æ—¶é—´å•ä½æ˜¯æ¯«ç§’ï¼Œä½†å¯ä»¥çœç•¥ï¼Œçœç•¥é»˜è®¤ä¸º0
- é¡µé¢ä¸­å¯èƒ½æœ‰å¾ˆå¤šå®šæ—¶å™¨ï¼Œæˆ‘ä»¬ç»å¸¸ç»™å®šæ—¶å™¨==èµ‹å€¼æ ‡è¯†ç¬¦==
- åœæ­¢å®šæ—¶å™¨ï¼šwindow.clearTimeout(timeout ID)
- å»¶æ—¶æ—¶é—´åˆ°äº†ï¼Œå°±å»è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œåªè°ƒç”¨ä¸€æ¬¡ï¼Œç„¶åç»“æŸè¿™ä¸ªå®šæ—¶å™¨

###### setInterval(å›è°ƒå‡½æ•°ï¼Œ[é—´éš”çš„æ¯«ç§’æ•°])

> æ¯éš”è¿™ä¸ªå»¶æ—¶æ—¶é—´ï¼Œå°±å»è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œä¼šè°ƒç”¨å¾ˆå¤šæ¬¡ï¼Œé‡å¤è°ƒç”¨

##### ajaxè¯·æ±‚å›è°ƒå‡½æ•°

##### ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°



### å…·åå‡½æ•°ï¼ˆå‘½åå‡½æ•°ï¼‰

```js
var fn1=function xxcanghai(){};
```

> æ³¨æ„ï¼šå…·åå‡½æ•°è¡¨è¾¾å¼çš„å‡½æ•°ååªèƒ½åœ¨åˆ›å»ºå‡½æ•°å†…éƒ¨ä½¿ç”¨



### åŒ¿åå‡½æ•°

```js
var fn1=function (){};
getFunctionName(fn1).length;//0
```



### ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE)

> åˆ«åï¼šåŒ¿åå‡½æ•°è‡ªè°ƒç”¨ï¼ˆä¸éœ€è¦è°ƒç”¨ï¼‰

1. å†™æ³•ï¼š


```js
//ç¬¬ä¸€ç§
(function(){
    
})()
```

```js
//ç¬¬äºŒç§
(function(){
    
}())
```

2. ä½œç”¨ï¼š

> 1. éšè—å®ç°
> 2. ä¸ä¼šæ±¡æŸ“å¤–éƒ¨(å…¨å±€)å‘½åç©ºé—´



### this

thisï¼šæŒ‡å‘é—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœ€ç»ˆæŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡

1. å…¨å±€ä½œç”¨åŸŸæˆ–è€…æ™®é€šå‡½æ•°ä¸­thisæŒ‡å‘å…¨å±€å¯¹è±¡`window`ï¼ˆå®šæ—¶å™¨é‡Œçš„thisæŒ‡å‘windowï¼‰

2. ä»»ä½•å‡½æ•°æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡æŸä¸ªå¯¹è±¡æ¥è°ƒç”¨çš„ï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥æŒ‡å®šå°±æ˜¯window

3. æ–¹æ³•è°ƒç”¨ä¸­è°**è°ƒç”¨**thisæŒ‡å‘è°

   > - `call(obj)`æŒ‡å‘obj
   > - `apply(obj)`ï¼šæŒ‡å‘obj

4. æ„é€ å‡½æ•°ä¸­thisæŒ‡å‘æ„é€ å‡½æ•°çš„å®ä¾‹ï¼ˆç±»ä¸­(å‡½æ•°ä½“ä¸­)å‡ºç°çš„ `this.xxx=xxx` ä¸­çš„ this æ˜¯å½“å‰ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼‰



## åˆ†å·é—®é¢˜

ä¸åŠ åˆ†å·æœ‰é—®é¢˜ï¼š

1. å°æ‹¬å·å¼€å¤´çš„å‰ä¸€æ¡è¯­å¥ï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰
2. ä¸­æ–¹æ‹¬å·å¼€å¤´çš„å‰ä¸€æ¡è¯­å¥





# å‡½æ•°é«˜çº§

## åŸå‹ä¸åŸå‹é“¾

### åŸå‹ prototype

å‡½æ•°çš„prototypeå±æ€§ï¼š

1. æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå®ƒé»˜è®¤æŒ‡å‘ä¸€ä¸ªObjectç©ºå¯¹è±¡ï¼ˆå³ç§°ä¸ºï¼š==åŸå‹å¯¹è±¡==ï¼‰

2. åŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªå±æ€§constructorï¼Œå®ƒæŒ‡å‘==å‡½æ•°å¯¹è±¡==

   ```js
   console.log(Object.prototype.constructor === Object);	//true
   ```

ç»™åŸå‹å¯¹è±¡æ·»åŠ å±æ€§ï¼ˆä¸€èˆ¬æ˜¯æ–¹æ³•ï¼‰===ã€‹å®ä¾‹å¯¹è±¡å¯ä»¥è®¿é—®

> ä½œç”¨ï¼šå‡½æ•°çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡è‡ªåŠ¨æ‹¥æœ‰åŸå‹ä¸­çš„å±æ€§ï¼ˆæ–¹æ³•ï¼‰



### æ˜¾ç¤ºåŸå‹ä¸éšå¼åŸå‹

prototypeå’Œ`__proto__`ä¸ºå¼•ç”¨å˜é‡

1. æ¯ä¸ªå‡½æ•°functionéƒ½æœ‰ä¸€ä¸ª`prototype`ï¼Œå³==æ˜¾å¼åŸå‹==ï¼ˆå±æ€§ï¼‰

   > å‡½æ•°çš„prototype: å®šä¹‰å‡½æ•°æ—¶è¢«è‡ªåŠ¨èµ‹å€¼, å€¼é»˜è®¤ä¸º{}, å³ç”¨ä¸ºåŸå‹å¯¹è±¡

2. æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª`__proto__`ï¼Œå¯ç§°ä¸º==éšå¼åŸå‹==ï¼ˆå±æ€§ï¼‰

   > å®ä¾‹å¯¹è±¡çš„`__proto__`: åœ¨åˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶è¢«è‡ªåŠ¨æ·»åŠ , å¹¶èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„prototypeå€¼

3. **å¯¹è±¡**çš„==éšå¼åŸå‹çš„å€¼==ä¸º**å…¶å¯¹åº”æ„é€ å‡½æ•°**çš„==æ˜¾å¼åŸå‹çš„å€¼==    åŸå‹å¯¹è±¡å³ä¸ºå½“å‰å®ä¾‹å¯¹è±¡çš„çˆ¶å¯¹è±¡

   ```js
   function Fn(){
   	...
   }
   var fn = new Fn()
   console.log(Fn.prototype === fn.__proto__);	 //true
   ```

4. å†…å­˜ç»“æ„

   ![image-20210730185957787](https://i.loli.net/2021/07/30/5hPZ7tJSIWs6Bua.png)

   

### åŸå‹é“¾

> è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå…ˆåœ¨è‡ªèº«å±æ€§ä¸­æŸ¥æ‰¾ï¼Œ å¦‚æœæ‰¾åˆ°å°±è¿”å›ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ²¿ç€`__proto__`è¿™æ¡é“¾å‘ä¸Šæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å°±è¿”å›ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›undefined

==â€œéšå¼åŸå‹é“¾â€==â€”â€”ä½œç”¨ï¼šæŸ¥æ‰¾å¯¹è±¡å±æ€§/ æ–¹æ³•

![image-20210730200148183](https://i.loli.net/2021/07/30/lf9FpCGrouUMb3E.png)

> Objectçš„åŸå‹å¯¹è±¡æ˜¯åŸå‹é“¾çš„å°½å¤´
>
> ```js
> fn ==> Fn.prototype ==> Object.prototype ==> null
> ```



#### æ„é€ å‡½æ•°/åŸå‹/å®ä¾‹å¯¹è±¡çš„å…³ç³»ï¼ˆå›¾è§£ï¼‰

```js
var o1 = new Object()
var o2 = {}
```

![ã€5ã€‘JavaScript å‡½æ•°é«˜çº§â€”â€”åŸå‹ä¸åŸå‹é“¾æ·±å…¥ç†è§£ï¼ˆå›¾è§£ï¼‰](https://img1.3s78.com/codercto/2efe759d3957b955f0f3540bb68c9116)



#### æ„é€ å‡½æ•°/åŸå‹/å®ä¾‹å¯¹è±¡çš„å…³ç³»2ï¼ˆå›¾è§£ï¼‰

```js
function Foo(){  }
```

ä¸Šè¿°ä»£ç çš„ç­‰ä»·å…³ç³»ï¼š

![image-20210730232509331](https://i.loli.net/2021/07/30/FtworiA9T8vUg3a.png)

![JavaScript å‡½æ•°é«˜çº§â€”â€”åŸå‹ä¸åŸå‹é“¾æ·±å…¥ç†è§£ï¼ˆå›¾è§£ï¼‰](https://i.loli.net/2021/07/30/jYoxLh2HvzIE3w4.png)

#### åŸå‹ç»§æ‰¿

- æ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡è‡ªåŠ¨æ‹¥æœ‰æ„é€ å‡½æ•°åŸå‹å¯¹è±¡çš„å±æ€§ï¼ˆæ–¹æ³•ï¼‰
- åˆ©ç”¨çš„å°±æ˜¯åŸå‹é“¾

#### åŸå‹é“¾â€”â€”å±æ€§é—®é¢˜

- ==è¯»å–==å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼šä¼šè‡ªåŠ¨åˆ°åŸå‹é“¾ä¸­æŸ¥æ‰¾
- ==è®¾ç½®==å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼š==ä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾==ï¼Œå¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ æ­¤å±æ€§å¹¶è®¾ç½®å…¶å€¼
- æ–¹æ³•ä¸€èˆ¬å®šä¹‰åœ¨åŸå‹ä¸­ï¼Œå±æ€§ä¸€èˆ¬é€šè¿‡æ„é€ å‡½æ•°å®šä¹‰åœ¨å¯¹è±¡æœ¬èº«ä¸Šã€‚

#### æ€»ç»“

å‡½æ•°çš„æ˜¾å¼åŸå‹æŒ‡å‘çš„å¯¹è±¡é»˜è®¤æ˜¯ç©ºObjectå®ä¾‹å¯¹è±¡ï¼ˆä½†Objectä¸æ»¡è¶³ï¼‰

```js
	function Fn(){ }
    console.log(Fn.prototype instanceof Object);    //true
    console.log(Object.prototype instanceof Object);    //false
    console.log(Function.prototype instanceof Object);  //true
```

æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ Functionå®ä¾‹

```js
console.log(Function.__proto__ === Function.prototype)	//true
```

Object çš„åŸå‹å¯¹è±¡æ˜¯åŸå‹é“¾çš„å°½å¤´

```js
console.log(Object.prototype.__proto__)	//null
```



### æ€è€ƒé¢˜

#### ğŸŒ°ä¸€

```js
var A = function() { }
A.prototype.n = 1
var b = new A()
A.prototype = {
  n: 2,
  m: 3
}
var c = new A()
console.log(b.n, b.m, c.n, c.m) // 1 undefined 2 3
```

![image-20210731010607600](https://i.loli.net/2021/07/31/gVAD7scoY6BrnmE.png)

#### ğŸŒ°äºŒ

```js
var F = function(){};
Object.prototype.a = function(){
  console.log('a()')
};
Function.prototype.b = function(){
  console.log('b()')
};
var f = new F();
f.a() // a()
f.b() // æŠ¥é”™  f.b is not a function
F.a() // a()
F.b() // b()
```

å‚è€ƒä¸‹å›¾ï¼š

![ã€5ã€‘JavaScript å‡½æ•°é«˜çº§â€”â€”åŸå‹ä¸åŸå‹é“¾æ·±å…¥ç†è§£ï¼ˆå›¾è§£ï¼‰](https://img1.3s78.com/codercto/c1ea1c13c1cd0ca65d88d3f2f5f8e8da)



## instanceof

è¡¨è¾¾å¼ï¼š `A instanceof B`

> å¦‚æœ `B` å‡½æ•°çš„æ˜¾å¼åŸå‹å¯¹è±¡åœ¨ `A` å¯¹è±¡çš„(éšå¼)åŸå‹é“¾ä¸Šï¼ˆç®€å•æ¥è¯´å°±æ˜¯åˆ¤æ–­A æ˜¯ä¸æ˜¯ B çš„å®ä¾‹ï¼‰ï¼Œè¿”å› true ï¼Œå¦åˆ™è¿”å› false

Function æ˜¯é€šè¿‡ `new` è‡ªå·±äº§ç”Ÿçš„å®ä¾‹

### æ¡ˆä¾‹ä¸€

```js
function Foo() {  }
var f1 = new Foo();
console.log(f1 instanceof Foo);	//true
console.log(f1 instanceof Object);	//true
```

![ã€5ã€‘JavaScript å‡½æ•°é«˜çº§â€”â€”åŸå‹ä¸åŸå‹é“¾æ·±å…¥ç†è§£ï¼ˆå›¾è§£ï¼‰](https://img1.3s78.com/codercto/424e524fa4e11405e868258e8c77cf62)



### æ¡ˆä¾‹äºŒ

```js
console.log(Object instanceof Function); // true 
console.log(Object instanceof Object); // true 
console.log(Function instanceof Function); // true 
console.log(Function instanceof Object); // true 

function Foo() {} 
console.log(Object instanceof Foo); // false
```

![ã€5ã€‘JavaScript å‡½æ•°é«˜çº§â€”â€”åŸå‹ä¸åŸå‹é“¾æ·±å…¥ç†è§£ï¼ˆå›¾è§£ï¼‰](https://img1.3s78.com/codercto/c1ea1c13c1cd0ca65d88d3f2f5f8e8da)

> æ³¨æ„ï¼š `Function` çš„æ˜¾ç¤ºåŸå‹å’Œéšå¼åŸå‹æ˜¯ä¸€æ ·çš„ã€‚









## æ‰§è¡Œä¸Šä¸‹æ–‡ä¸æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ

### å˜é‡æå‡ä¸å‡½æ•°æå‡

å˜é‡æå‡: åœ¨==å˜é‡å®šä¹‰==è¯­å¥ä¹‹å‰, å°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå˜é‡(undefined)

```js
var a = 3
function fn(){
    console.log(a);	//undefined
    var a = 4
}
fn()
```

å‡½æ•°æå‡: åœ¨==å‡½æ•°å®šä¹‰==è¯­å¥ä¹‹å‰, å°±æ‰§è¡Œè¯¥å‡½æ•°

> å…ˆæœ‰å˜é‡æå‡, å†æœ‰å‡½æ•°æå‡

### æ‰§è¡Œä¸Šä¸‹æ–‡

* æ‰§è¡Œä¸Šä¸‹æ–‡: ç”±jså¼•æ“è‡ªåŠ¨åˆ›å»ºçš„å¯¹è±¡, åŒ…å«å¯¹åº”ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å˜é‡å±æ€§
* æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ: ç”¨æ¥ç®¡ç†äº§ç”Ÿçš„å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡

æ‰§è¡Œä¸Šä¸‹æ–‡æ•°ï¼ˆæœ€å¤šï¼‰ï¼šn+1

1. windowï¼ˆ1ï¼‰
2. å‡½æ•°çš„è°ƒç”¨ï¼ˆnï¼‰

#### æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸ

æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š==åˆ›å»ºé˜¶æ®µ â†’ æ‰§è¡Œé˜¶æ®µ â†’ å›æ”¶é˜¶æ®µ==

##### 1. åˆ›å»ºé˜¶æ®µ

å½“å‡½æ•°è¢«è°ƒç”¨ï¼Œä½†æœªæ‰§è¡Œä»»ä½•å…¶å†…éƒ¨ä»£ç ä¹‹å‰ï¼Œä¼šåšä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š

- åˆ›å»ºå˜é‡å¯¹è±¡ï¼šé¦–å…ˆåˆå§‹åŒ–å‡½æ•°çš„å‚æ•° argumentsï¼Œæå‡å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜ã€‚

- åˆ›å»ºä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰ï¼šåœ¨æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µï¼Œä½œç”¨åŸŸé“¾æ˜¯åœ¨å˜é‡å¯¹è±¡ä¹‹ååˆ›å»ºçš„ã€‚ä½œç”¨åŸŸé“¾æœ¬èº«åŒ…å«å˜é‡å¯¹è±¡ã€‚ä½œç”¨åŸŸé“¾ç”¨äºè§£æå˜é‡ã€‚å½“è¢«è¦æ±‚è§£æå˜é‡æ—¶ï¼ŒJavaScript å§‹ç»ˆä»ä»£ç åµŒå¥—çš„æœ€å†…å±‚å¼€å§‹ï¼Œå¦‚æœæœ€å†…å±‚æ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œå°±ä¼šè·³è½¬åˆ°ä¸Šä¸€å±‚çˆ¶ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡ã€‚

- ç¡®å®š this æŒ‡å‘

  ![img](https://image.fundebug.com/2019-03-19-01.png)

> åœ¨ä¸€æ®µ JS è„šæœ¬æ‰§è¡Œä¹‹å‰ï¼Œè¦å…ˆè§£æä»£ç ï¼ˆæ‰€ä»¥è¯´ JS æ˜¯è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è¯­è¨€ï¼‰ï¼Œè§£æçš„æ—¶å€™ä¼šå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå…ˆæŠŠä»£ç ä¸­å³å°†æ‰§è¡Œçš„å˜é‡ã€å‡½æ•°å£°æ˜éƒ½æ‹¿å‡ºæ¥ã€‚å˜é‡å…ˆæš‚æ—¶èµ‹å€¼ä¸º undefinedï¼Œå‡½æ•°åˆ™å…ˆå£°æ˜å¥½å¯ä½¿ç”¨ã€‚è¿™ä¸€æ­¥åšå®Œäº†ï¼Œç„¶åå†å¼€å§‹æ­£å¼æ‰§è¡Œç¨‹åºã€‚

å¦å¤–ï¼Œä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè·Ÿå…¨å±€ä¸Šä¸‹æ–‡å·®ä¸å¤šï¼Œä¸è¿‡ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä¼šå¤šå‡º this arguments å’Œå‡½æ•°çš„å‚æ•°ã€‚

##### 2. æ‰§è¡Œé˜¶æ®µ

æ‰§è¡Œå˜é‡èµ‹å€¼ã€ä»£ç æ‰§è¡Œ

##### 3. å›æ”¶é˜¶æ®µ

æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆç­‰å¾…è™šæ‹Ÿæœºå›æ”¶æ‰§è¡Œä¸Šä¸‹æ–‡



#### å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡

> ç”Ÿå‘½å‘¨æœŸï¼šå‡†å¤‡æ‰§è¡Œå…¨å±€ä»£ç å‰äº§ç”Ÿ, å½“é¡µé¢åˆ·æ–°/å…³é—­é¡µé¢æ—¶æ­»äº¡

###### æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºå’Œåˆå§‹åŒ–çš„è¿‡ç¨‹

1. åœ¨å…¨å±€ä»£ç æ‰§è¡Œå‰æœ€å…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šwindow

2. å¯¹å…¨å±€æ•°æ®è¿›è¡Œ==é¢„å¤„ç†==ï¼ˆæ”¶é›†ä¸€äº›å…¨å±€å˜é‡, å¹¶åˆå§‹åŒ–ï¼Œå°†è¿™äº›å˜é‡è®¾ç½®ä¸ºwindowçš„å±æ€§ï¼‰

   > * ç”¨varå®šä¹‰çš„å…¨å±€å˜é‡  ==>undefined
   > * ä½¿ç”¨functionå£°æ˜çš„å‡½æ•°   ===>function
   > * this   ===>window

3. å¼€å§‹æ‰§è¡Œå…¨å±€ä¸Šä¸‹æ–‡



#### å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡

> ç”Ÿå‘½å‘¨æœŸï¼šè°ƒç”¨å‡½æ•°æ—¶äº§ç”Ÿ, å‡½æ•°æ‰§è¡Œå®Œæ—¶æ­»äº¡

###### æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºå’Œåˆå§‹åŒ–çš„è¿‡ç¨‹

1. åœ¨è°ƒç”¨å‡½æ•°æ—¶, åœ¨æ‰§è¡Œå‡½æ•°ä½“ä¹‹å‰å…ˆåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆè™šæ‹Ÿçš„ï¼Œå­˜åœ¨äºæ ˆä¸­ï¼‰

2. å¯¹å±€éƒ¨æ•°æ®è¿›è¡Œ==é¢„å¤„ç†==ï¼ˆæ”¶é›†ä¸€äº›å±€éƒ¨å˜é‡, å¹¶åˆå§‹åŒ–ï¼Œå°†è¿™äº›å˜é‡è®¾ç½®ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„å±æ€§ï¼‰

   > * ç”¨varå®šä¹‰çš„å±€éƒ¨å˜é‡  ==>undefined
   > * ä½¿ç”¨functionå£°æ˜çš„å‡½æ•°   ===>function
   > * this   ===> è°ƒç”¨å‡½æ•°çš„å¯¹è±¡, å¦‚æœæ²¡æœ‰æŒ‡å®šå°±æ˜¯window 
   > * å½¢å‚å˜é‡   ===> å¯¹åº”å®å‚å€¼
   > * arguments ===>å®å‚åˆ—è¡¨çš„ä¼ªæ•°ç»„

3. å¼€å§‹æ‰§è¡Œå‡½æ•°ä½“ä»£ç 

###### ğŸŒ°ï¼š

```js
function fn(a1){
    console.log(a1);
    console.log(a2);
    a3()
    console.log(this);
    console.log(arguments);		//ä¼ªæ•°ç»„

    var a2 = 3
    function a3(){
        console.log("a3()");
    }
}

fn(2,3)
```

è¾“å‡ºç»“æœï¼š

![image-20210731110225139](https://i.loli.net/2021/07/31/Ov94jSRfMaB62cF.png)



##### æµç¨‹åˆ†æ

```js
var a = 10
var bar = function (x) {
	var b = 5
	foo(x + b)              
}

var foo = function (y) {
	var c = 5
	console.log(a + c + y)
}

bar(10)  
```

![image-20210731112715073](https://i.loli.net/2021/07/31/KWUsvgb9H2ftYcE.png)



### æ€è€ƒé¢˜

#### ğŸŒ°ä¸€

```js
console.log('global beginï¼š' + i);
var i = 1;
foo(1)
function foo(i) {
    if(i == 4){
        return
    }
    console.log('foo() baginï¼š' + i);
    foo(i + 1)  //é€’å½’è°ƒç”¨ï¼Œåœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªå·±
    console.log('foo() endï¼š' + i);
}
console.log('global endï¼š'+ i);
```

è¾“å‡ºç»“æœï¼š

![](https://i.loli.net/2021/07/31/QBfPRsbLgoSWD82.png)



#### ğŸŒ°äºŒ

```js
function a() {}
var a;
console.log(typeof a)	//function
```

> çŸ¥è¯†ç‚¹ï¼šå…ˆæ‰§è¡Œå˜é‡æå‡ï¼Œåœ¨æ‰§è¡Œå‡½æ•°æå‡



#### ğŸŒ°ä¸‰

```js
if (!(b in window)) {
    var b = 1;
}
console.log(b)		//undefined
```



#### ğŸŒ°å››

```js
var c = 1
function c(c) {
console.log(c)
	var c = 3
}

c(2)
```

  ç»“æœï¼š

![image-20210731122920612](https://i.loli.net/2021/07/31/UygoD4WdG3xZSbP.png)



## ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾

### ç†è§£

* ä½œç”¨åŸŸ: ä¸€å—ä»£ç åŒºåŸŸ, åœ¨ç¼–ç æ—¶å°±ç¡®å®šäº†, ä¸ä¼šå†å˜åŒ–
* ä½œç”¨åŸŸé“¾: å¤šä¸ªåµŒå¥—çš„ä½œç”¨åŸŸå½¢æˆçš„ç”±å†…å‘å¤–çš„ç»“æ„, ç”¨äºæŸ¥æ‰¾å˜é‡

### ä½œç”¨åŸŸä¸ªæ•°

==n+1==

- windowï¼ˆ1ï¼‰
- å‡½æ•°å®šä¹‰ä¸ªæ•°ï¼ˆnï¼‰

### åˆ†ç±»

* å…¨å±€ä½œç”¨åŸŸ
* å‡½æ•°ä½œç”¨åŸŸ
* jsæ²¡æœ‰å—ä½œç”¨åŸŸ(åœ¨ES6ä¹‹å‰)

### ä½œç”¨

* ä½œç”¨åŸŸ: éš”ç¦»å˜é‡, å¯ä»¥åœ¨ä¸åŒä½œç”¨åŸŸå®šä¹‰åŒåçš„å˜é‡ä¸å†²çª
* ä½œç”¨åŸŸé“¾: æŸ¥æ‰¾å˜é‡

* åŒºåˆ«ä½œç”¨åŸŸä¸æ‰§è¡Œä¸Šä¸‹æ–‡
  * ä½œç”¨åŸŸ: é™æ€çš„, ç¼–ç æ—¶å°±ç¡®å®šäº†(ä¸æ˜¯åœ¨è¿è¡Œæ—¶), ä¸€æ—¦ç¡®å®šå°±ä¸ä¼šå˜åŒ–äº†
  * æ‰§è¡Œä¸Šä¸‹æ–‡: åŠ¨æ€çš„, æ‰§è¡Œä»£ç æ—¶åŠ¨æ€åˆ›å»º, å½“æ‰§è¡Œç»“æŸæ¶ˆå¤±
  * è”ç³»: æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒæ˜¯åœ¨å¯¹åº”çš„ä½œç”¨åŸŸä¸­çš„

### æ€è€ƒé¢˜

#### ğŸŒ°ä¸€

```js
var x = 10;
function fn() {
    console.log(x);
}

function show(f) {
    var x = 20;
    f();
}

show(fn);	//è¾“å‡º 10
```

åˆ†æï¼š

![image-20210731165538109](https://i.loli.net/2021/07/31/4UIzftMJxoy5elq.png)



#### ğŸŒ°äºŒ

```js
var fn = function () {
    console.log(fn)
}
fn()

var obj = {
    fn2: function () {
        console.log(fn2)
    }
}
obj.fn2()
```

![image-20210731165832510](https://i.loli.net/2021/07/31/A7r8EK5CHwDlJP9.png)



## é—­åŒ…

### å«ä¹‰

* å½“ä¸€ä¸ªåµŒå¥—çš„å†…éƒ¨(å­)å‡½æ•°å¼•ç”¨äº†åµŒå¥—çš„å¤–éƒ¨(çˆ¶)å‡½æ•°çš„å˜é‡(å‡½æ•°)æ—¶, å°±äº§ç”Ÿäº†é—­åŒ…

* é€šè¿‡chromeå·¥å…·å¾—çŸ¥: é—­åŒ…æœ¬è´¨æ˜¯å†…éƒ¨å‡½æ•°ä¸­çš„ä¸€ä¸ªå¯¹è±¡, è¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«å¼•ç”¨çš„å˜é‡å±æ€§

  >  æ³¨æ„: é—­åŒ…å­˜åœ¨äºåµŒå¥—çš„å†…éƒ¨å‡½æ•°ä¸­

```js
//å‡½æ•°fn2å°±è¢«åŒ…æ‹¬åœ¨å‡½æ•°fn1å†…éƒ¨
//è¿™æ—¶fn1å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹fn2éƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œï¼Œfn2å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹fn1å°±æ˜¯ä¸å¯è§çš„ã€‚
function fn1(){
    var a = 2
    var b = 'abc'
    function fn2(){
        console.log(a);
    }
    //æ—¢ç„¶fn2å¯ä»¥è¯»å–fn1ä¸­çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåªè¦æŠŠfn2ä½œä¸ºè¿”å›å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨fn1å¤–éƒ¨è¯»å–å®ƒçš„å†…éƒ¨å˜é‡äº†
    //return fn2
    fn2()
}
fn1()
```

> è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼Œå‡½æ•°å†…éƒ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨varå‘½ä»¤ã€‚å¦‚æœä¸ç”¨çš„è¯ï¼Œä½ å®é™…ä¸Šå£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼

è¿™é‡Œé¢ç¡®å®æœ‰é—­åŒ…ï¼Œa å˜é‡å’Œ fn2 å‡½æ•°å°±ç»„æˆäº†ä¸€ä¸ªé—­åŒ…ï¼ˆClosureï¼‰ã€‚

![image-20210731171503008](https://i.loli.net/2021/07/31/IASEVt6Y4oQv2uD.png)

![image-20210731171617484](C:\Users\Area1\AppData\Roaming\Typora\typora-user-images\image-20210731171617484.png)



### å¸¸è§çš„é—­åŒ…

####  â‘  å°†å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼

```js
// 1. å°†å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼
 function fn1() {
   var a = 2
   function fn2() {
     a++
     console.log(a)
   }
   return fn2
 }
 var f = fn1()
 f() // 3
 f() // 4
```

#### â‘¡ å°†å‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨

```js
// 2. å°†å‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨
 function showDelay(msg, time) {
   setTimeout(function () {
     alert(msg)
   }, time)
 }
 showDelay('atguigu', 2000)
```



### ä½œç”¨

##### å°æ¡ˆä¾‹åˆ†æ

å‡è®¾æˆ‘ä»¬åœ¨åšä¸€ä¸ªæ¸¸æˆï¼Œåœ¨å†™å…¶ä¸­å…³äºã€Œè¿˜å‰©å‡ æ¡å‘½ã€çš„ä»£ç ã€‚

å¦‚æœä¸ç”¨é—­åŒ…ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ï¼š

```text
window.lives = 30 // è¿˜æœ‰ä¸‰åæ¡å‘½
```

è¿™æ ·çœ‹èµ·æ¥å¾ˆä¸å¦¥ã€‚ä¸‡ä¸€ä¸å°å¿ƒæŠŠè¿™ä¸ªå€¼æ”¹æˆ -1 äº†æ€ä¹ˆåŠã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è®©åˆ«äººã€Œç›´æ¥è®¿é—®ã€è¿™ä¸ªå˜é‡ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿ==ç”¨å±€éƒ¨å˜é‡==ã€‚

ä½†æ˜¯ç”¨å±€éƒ¨å˜é‡åˆ«äººåˆè®¿é—®ä¸åˆ°ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ

è§£å†³åŠæ³•ï¼šæš´éœ²ä¸€ä¸ªè®¿é—®å™¨ï¼ˆå‡½æ•°ï¼‰ï¼Œè®©åˆ«äººå¯ä»¥ã€Œé—´æ¥è®¿é—®ã€ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```js
!function(){
  var lives = 50
  
  window.å¥–åŠ±ä¸€æ¡å‘½ = function(){
    lives += 1
  }

  window.æ­»ä¸€æ¡å‘½ = function(){
    lives -= 1
  }
}()
```

é‚£ä¹ˆåœ¨å…¶ä»–çš„ JS æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ window.å¥–åŠ±ä¸€æ¡å‘½() æ¥æ¶¨å‘½ï¼Œä½¿ç”¨ window.æ­»ä¸€æ¡å‘½() æ¥è®©è§’è‰²æ‰ä¸€æ¡å‘½ã€‚

çœ‹åˆ°é—­åŒ…åœ¨å“ªäº†å—ï¼Ÿ

![img](https://pic4.zhimg.com/80/v2-89bf8b72fb612a1e2f348ed0b3e0689f_720w.jpg)

##### æ€»ç»“

- å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼ˆè®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ã€‚ï¼‰

* è®©å‡½æ•°å¤–éƒ¨èƒ½æ“ä½œå†…éƒ¨çš„å±€éƒ¨å˜é‡

* å†™ä¸€ä¸ªé—­åŒ…ç¨‹åº

  ```js
  function fn1() {
    var a = 2;
    function fn2() {
      a++;
      console.log(a);
    }
    return fn2;
  }
  var f = fn1();
  f();	//3
  f();	//4
  f = null //é—­åŒ…ç­äº¡(åŒ…å«é—­åŒ…çš„å‡½æ•°å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡)
  ```


> åœ¨è¿™æ®µä»£ç ä¸­ï¼Œf å®é™…ä¸Šå°±æ˜¯é—­åŒ… fn2 å‡½æ•°ï¼Œå®ƒä¸€å…±è¿è¡Œäº†ä¸¤æ¬¡ã€‚è¿™è¯æ˜äº†ï¼Œå‡½æ•° fn1 ä¸­çš„å±€éƒ¨å˜é‡ a ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰åœ¨ fn1 è°ƒç”¨åè¢«è‡ªåŠ¨æ¸…é™¤ã€‚
>
> > åŸå› å°±åœ¨äº==fn1==æ˜¯==fn2==çš„çˆ¶å‡½æ•°ï¼Œè€Œfn2è¢«èµ‹ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè¿™å¯¼è‡´==fn2å§‹ç»ˆåœ¨å†…å­˜ä¸­==ï¼Œè€Œf2çš„å­˜åœ¨ä¾èµ–äºf1ï¼Œå› æ­¤==fn1ä¹Ÿå§‹ç»ˆåœ¨å†…å­˜ä¸­==ï¼Œä¸ä¼šåœ¨è°ƒç”¨ç»“æŸåï¼Œè¢«åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆgarbage collectionï¼‰å›æ”¶ã€‚



### é—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸ

äº§ç”Ÿ: åœ¨åµŒå¥—å†…éƒ¨å‡½æ•°å®šä¹‰æ‰§è¡Œå®Œæ—¶å°±äº§ç”Ÿäº†(ä¸æ˜¯åœ¨è°ƒç”¨)

æ­»äº¡: åœ¨åµŒå¥—çš„å†…éƒ¨å‡½æ•°æˆä¸ºåƒåœ¾å¯¹è±¡æ—¶

> å³æ²¡æœ‰äººæŒ‡å‘å®ƒæ—¶æ­»äº¡,é€šå¸¸ç½®ä¸º[`null`],å½“ç„¶æŒ‡å‘å…¶ä»–ä¹Ÿè¡Œ,ä½†ä¸å®‰å…¨(å®¹æ˜“æ±¡æŸ“å˜é‡)

```js
//é—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸ
function fn1() {
   //æ­¤æ—¶é—­åŒ…å°±å·²ç»äº§ç”Ÿäº†(å‡½æ•°æå‡,å®é™…ä¸Š[fn2]æå‡åˆ°äº†ç¬¬ä¸€è¡Œ, å†…éƒ¨å‡½æ•°å¯¹è±¡å·²ç»åˆ›å»ºäº†)
   var a = 2
   function fn2 () { //å¦‚æœæ—¶[let fn2=function(){}],é‚£ä¹ˆåœ¨è¿™è¡Œæ‰ä¼šäº§ç”Ÿé—­åŒ…
     a++
     console.log(a)
   }
   return fn2
 }
 var f = fn1()
 f() // 3
 f() // 4
 f = null //é—­åŒ…æ­»äº¡(åŒ…å«é—­åŒ…çš„å‡½æ•°å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡)
```



### é—­åŒ…åº”ç”¨

#### å®šä¹‰JSæ¨¡å—

æ¨¡å—å®šä¹‰ï¼š

> 1. å…·æœ‰ç‰¹å®šåŠŸèƒ½çš„jsæ–‡ä»¶
> 2. å°†æ‰€æœ‰çš„æ•°æ®å’ŒåŠŸèƒ½éƒ½å°è£…åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨(ç§æœ‰çš„)
> 3. åªå‘å¤–æš´éœ²ä¸€ä¸ªåŒ…ä¿¡nä¸ªæ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°
> 4. æ¨¡å—çš„ä½¿ç”¨è€…, åªéœ€è¦é€šè¿‡æ¨¡å—æš´éœ²çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æ¥å®ç°å¯¹åº”çš„åŠŸèƒ½

- æ¨¡å—åŒ–: å°è£…ä¸€äº›æ•°æ®ä»¥åŠæ“ä½œæ•°æ®çš„å‡½æ•°, å‘å¤–æš´éœ²ä¸€äº›è¡Œä¸º

  ```js
  (function (window){
  	var msg = "hello"
  	
  	function f1(){
  		console.log(msg.toUpperCase())
  	}
  	
  	function f2(){
  		console.log(msg.toLowerCase(0))
  	}
  	
  	window.myModule = {
  		f1: f1,
  		f2: f2
  	}
  })(window)
  
  â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” æ¨¡å—çš„è°ƒç”¨ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  <script type="text/javascript" src="myModule2.js"></script>
  <script type="text/javascript">
    myModule2.doSomething()
    myModule2.doOtherthing()
  </script>
  ```

* å¾ªç¯éå†åŠ ç›‘å¬
* JSæ¡†æ¶(jQuery)å¤§é‡ä½¿ç”¨äº†é—­åŒ…



#### ç¼ºç‚¹

* å˜é‡å ç”¨å†…å­˜çš„æ—¶é—´å¯èƒ½ä¼šè¿‡é•¿
* å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²

###### è§£å†³

* åŠæ—¶é‡Šæ”¾ : f = null; //è®©å†…éƒ¨å‡½æ•°å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡
* è°ƒç”¨æ—¶ç›´æ¥`f()()`ç›´æ¥è¿è¡Œè°ƒç”¨å³å¯-->åŒ¿åå‡½æ•°,ç”¨å®Œè‡ªåŠ¨å°±é”€æ¯äº†

###### ä½¿ç”¨é—­åŒ…çš„æ³¨æ„ç‚¹

> é—­åŒ…ä¼šåœ¨çˆ¶å‡½æ•°å¤–éƒ¨ï¼Œæ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æŠŠçˆ¶å‡½æ•°å½“ä½œå¯¹è±¡ï¼ˆobjectï¼‰ä½¿ç”¨ï¼ŒæŠŠé—­åŒ…å½“ä½œå®ƒçš„å…¬ç”¨æ–¹æ³•ï¼ˆPublic Methodï¼‰ï¼ŒæŠŠå†…éƒ¨å˜é‡å½“ä½œå®ƒçš„ç§æœ‰å±æ€§ï¼ˆprivate valueï¼‰ï¼Œè¿™æ—¶ä¸€å®šè¦å°å¿ƒï¼Œä¸è¦éšä¾¿æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚



### å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²

##### å†…å­˜æº¢å‡º

> ä¸€ç§ç¨‹åºè¿è¡Œå‡ºç°çš„é”™è¯¯ï¼šå½“ç¨‹åºè¿è¡Œéœ€è¦çš„å†…å­˜è¶…è¿‡äº†å‰©ä½™çš„å†…å­˜æ—¶, å°±å‡ºæŠ›å‡ºå†…å­˜æº¢å‡ºçš„é”™è¯¯

##### å†…å­˜æ³„éœ²

  * å ç”¨çš„å†…å­˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾
  * å†…å­˜æ³„éœ²ç§¯ç´¯å¤šäº†å°±å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º
  * å¸¸è§çš„å†…å­˜æ³„éœ²:
    * æ„å¤–çš„å…¨å±€å˜é‡
    
      > å‡½æ•°å†…éƒ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨varå‘½ä»¤ã€‚å¦‚æœä¸ç”¨çš„è¯ï¼Œä½ å®é™…ä¸Šå£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼
    
    * æ²¡æœ‰åŠæ—¶æ¸…ç†çš„è®¡æ—¶å™¨æˆ–å›è°ƒå‡½æ•°
    
    * é—­åŒ…



### åƒåœ¾å›æ”¶æœºåˆ¶

> å†…å­˜æ³„æ¼ ğŸ‘‰å †æ ˆæº¢å‡º ğŸ‘‰ åƒåœ¾å›æ”¶æœºåˆ¶

#### è‡ªåŠ¨æ¸…ç†

> å°†æ‰€æœ‰å¼•ç”¨å †ä¸­åœ°å€çš„å¯¹è±¡éƒ½è®¾ç½®ä¸ºnullï¼Œå¹¶ä¸”å°†æ‰€æœ‰å¼•ç”¨è¯¥åœ°å€çš„å¯¹è±¡éƒ½è®¾ç½®ä¸ºnullï¼Œä¸ä¼šå³æ—¶æ¸…é™¤ï¼Œåƒåœ¾å›æ”¶è½¦ä¼šæ ¹æ®å†…å­˜çš„æƒ…å†µåœ¨é€‚å½“çš„æ—¶å€™æ¸…é™¤å †ä¸­çš„å­¤å„¿å¯¹è±¡ã€‚



### æ€è€ƒé¢˜

#### ğŸŒ°ä¸€

```js
var name = "The Window";

var object1 = {
    name : "My Object",
    getNameFunc : function(){
      return function(){
        return this.name;
      };
    }
};
//ç›´æ¥æ‰§è¡Œå‡½æ•°æŒ‡å‘ windowï¼Œä¸æ„æˆé—­åŒ…
alert(object1.getNameFunc()());		// è¾“å‡º The Window

var object2 = {
    name : "My Object",
    
    getNameFunc : function(){
      var that = this;
      return function(){
        return that.name;
      };
    }
};

alert(object2.getNameFunc()());		 //è¾“å‡º The My Object
```





#### ğŸŒ°äºŒ

```js
function fun(n,o) {
    console.log(o)
    return {
        fun:function(m){
        	return fun(m,n);
        }
    };
}

var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);	//undefined,0,0,0
var b = fun(0).fun(1).fun(2).fun(3);				//undefined,0,1,2
var c = fun(0).fun(1);  c.fun(2);  c.fun(3);		//undefined,0,1,1
```

> æ³¨ï¼šå½“è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ å…¥çš„å®å‚æ¯”å‡½æ•°å£°æ˜æ—¶æŒ‡å®šçš„å½¢å‚ä¸ªæ•°è¦å°‘ï¼Œå‰©ä¸‹çš„å½¢å‚éƒ½å°†è®¾ç½®ä¸ºundefinedå€¼ã€‚

æ‰§è¡Œ`a.fun(0);`ï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡

![image-20210731213815338](https://i.loli.net/2021/07/31/I6bJGRLmCu1OMTy.png)

æ‰§è¡Œ`a.fun(1);`ï¼šä¼ å…¥1ï¼Œé‡æ–°æ‰§è¡Œ fun(m, n)ï¼Œè¿™æ˜¯mä¸ºæˆ‘ä»¬ä¼ å…¥çš„1ï¼Œä»£ç å¦‚ä¸‹ã€ï¼š

```js
{
    fun:function(1){
        return fun(1,0);
    }
}
```

```js
 function fun(n,o){ //nçš„å€¼ä¸º1ï¼Œoçš„å€¼ä¸º0
        console.log(o);
        return {
            fun:function(m){
                return fun(m,n);//nçš„å€¼ä¸º1
            }
        };
}
fun(1,0);  
//è¾“å‡º0ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªfunçš„æ–¹æ³•,è¿™ä¸ªæ–¹æ³•è°ƒç”¨åï¼Œä¼šè¿”å›å¤–å±‚funå‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œå¹¶ä¸”å¤–å±‚å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ n çš„å€¼ï¼Œä¹Ÿå°±æ˜¯1  
```

> å› ä¸ºç”¨ a æ¥å—äº†funçš„è¿”å›å€¼ï¼Œå½¢æˆé—­åŒ…ï¼Œæ‰€ä»¥ä¸‹é¢ä¸¤ä¸ªè¿˜æ˜¯0ï¼Œå’Œä¸Šé¢çš„åˆ†æåŸºæœ¬ç›¸åŒï¼Œè™½ç„¶ä¼ å…¥çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯ç”±äºå–å¾—æ˜¯ä¹‹å‰ä¼ å…¥çš„0ï¼Œæ‰€ä»¥è¾“å‡ºçš„éƒ½æ˜¯0ï¼›

bå’Œaçš„ä¸åŒåœ¨äºï¼Œvar a = fun(0); ä¹‹åä¸€ç›´ç”¨çš„æ˜¯aè¿™ä¸ªå¯¹è±¡ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œbæ¯æ¬¡ç”¨çš„éƒ½æ˜¯ä¸Šæ¬¡è¿”å›çš„å¯¹è±¡ã€‚

> fun(0).fun(1).fun(2) ==>>>  è¿™é‡Œä¼ å…¥m=2æ—¶ï¼Œç»§æ‰¿ä¸Šä¸€æ­¥nå·²ç»ä¸º1ï¼Œ**ï¼ˆm,nï¼‰ä¸º2,1ï¼Œé‡æ–°è¿›å…¥æ—¶ï¼Œn,oä¸º,2,1**è¾“å‡ºoä¸º1ï¼›

å¦‚æœæ”¹æˆè¿™æ ·ï¼š

```js
//æŠŠè¿”å›çš„å¯¹è±¡ï¼Œé‡æ–°èµ‹å€¼ç»™aï¼Œè¿™æ ·ä¸¤è¡Œçš„ç»“æœå°±æ˜¯ä¸€æ ·çš„äº†ã€‚
var a = fun(0); a=a.fun(1); a=a.fun(2); a=a.fun(3);
var b = fun(0).fun(1).fun(2).fun(3);
```





# å¯¹è±¡é«˜çº§

## å¯¹è±¡çš„åˆ›å»ºæ¨¡å¼

##### Objectæ„é€ å‡½æ•°æ¨¡å¼

- å…ˆåˆ›å»ºç©ºObject å¯¹è±¡ï¼Œå†åŠ¨æ€æ·»åŠ å±æ€§/ æ–¹æ³•

> ä½¿ç”¨åœºæ™¯ï¼šèµ·å§‹æ—¶ä¸ç¡®å®šå¯¹è±¡å†…éƒ¨æ•°æ®ï¼ˆé—®é¢˜ï¼šè¯­å¥å¤ªå¤šï¼‰

```js
var obj = {};
obj.name = 'Tom'
obj.setName = function(name){
    this.name=name
}
```

##### å¯¹è±¡å­—é¢é‡æ¨¡å¼

- ä½¿ç”¨ `{}` åˆ›å»ºå¯¹è±¡ï¼ŒåŒæ—¶æŒ‡å®šå±æ€§ã€æ–¹æ³•

> ä½¿ç”¨åœºæ™¯ï¼šèµ·å§‹æ—¶å¯¹è±¡å†…éƒ¨æ•°æ®æ˜¯ç¡®è®¤çš„ï¼ˆè‹¥åˆ›å»ºåˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæœ‰é‡å¤ä»£ç ï¼‰

```js
var obj = {
  name : 'Tom',
  setName : function(name){this.name = name}
}
```

##### å·¥å‚æ¨¡å¼ï¼ˆäº†è§£å³å¯ï¼‰

- é€šè¿‡å·¥å‚å‡½æ•°åŠ¨æ€åˆ›å»ºå¯¹è±¡å¹¶è¿”å›

> ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼ˆå¯¹è±¡æ²¡æœ‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œéƒ½æ˜¯Objectç±»å‹ï¼‰

```js
function createPerson(name,age) {		//å·¥å‚å‡½æ•°
	var obj = {
		name: name,
		age: age,
		setName: function (name){
			this.name = name
		}
	}
	return obj
}

var p1 = createPerson("Tom",12)
var p2 = createPerson("Bob",13)
```

##### æ„é€ å‡½æ•°æ¨¡å¼

- è‡ªå®šä¹‰æ„é€ å‡½æ•°, é€šè¿‡newåˆ›å»ºå¯¹è±¡

> é€‚ç”¨åœºæ™¯: éœ€è¦åˆ›å»ºå¤šä¸ªç±»å‹ç¡®å®šçš„å¯¹è±¡ï¼ˆ æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„æ•°æ®, æµªè´¹å†…å­˜ï¼‰

```js
function Person(name, age) {
  this.name = name;
  this.age = age;
  this.setName = function(name){this.name=name;};
}
new Person('tom', 12);
```

##### æ„é€ å‡½æ•°+åŸå‹çš„ç»„åˆæ¨¡å¼

- è‡ªå®šä¹‰æ„é€ å‡½æ•°, å±æ€§åœ¨å‡½æ•°ä¸­åˆå§‹åŒ–, æ–¹æ³•æ·»åŠ åˆ°åŸå‹ä¸Š

> é€‚ç”¨åœºæ™¯: éœ€è¦åˆ›å»ºå¤šä¸ªç±»å‹ç¡®å®šçš„å¯¹è±¡

```js
function Person(name, age) {
  this.name = name;
  this.age = age;
}
Person.prototype.setName = function(name){this.name=name;};
new Person('tom', 12);
```



## ç»§æ‰¿æ¨¡å¼

### åŸå‹é“¾ç»§æ‰¿ 

> å¾—åˆ°æ–¹æ³•

```js
//çˆ¶ç±»å‹
function Supper(){			// 1. å®šä¹‰çˆ¶ç±»å‹æ„é€ å‡½æ•°
    this.supProp = 'Supper property'
}
Supper.prototype.showSupperProp = function(){		// 2. ç»™çˆ¶ç±»å‹çš„åŸå‹æ·»åŠ æ–¹æ³•
    console.log(this.supProp);
}

//å­ç±»å‹
function Sub(){			// 3. å®šä¹‰å­ç±»å‹çš„æ„é€ å‡½æ•° 
    this.subProp = 'Sub proterty'
}
//å­ç±»å‹çš„åŸå‹ä¸ºçˆ¶ç±»å‹çš„å®ä¾‹å¯¹è±¡
Sub.prototype = new Supper()		// 4.åˆ›å»ºçˆ¶ç±»å‹çš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»å‹çš„åŸå‹,å­ç±»å‹çš„åŸå‹æŒ‡å‘çˆ¶ç±»å‹å®ä¾‹
Sub.prototype.constructor = Sub		// 5. å°†å­ç±»å‹åŸå‹çš„æ„é€ å±æ€§è®¾ç½®ä¸ºå­ç±»å‹
Sub.prototype.showSubProp = function(){			// 6. ç»™å­ç±»å‹åŸå‹æ·»åŠ æ–¹æ³•
    console.log(this.subProp);
}
var sub = new Sub()			// 7. åˆ›å»ºå­ç±»å‹çš„å¯¹è±¡: å¯ä»¥è°ƒç”¨çˆ¶ç±»å‹çš„æ–¹æ³•
```

åˆ†æå›¾ï¼š

![image-20210731235652684](https://i.loli.net/2021/08/01/KFVhst9alEIJQ35.png)

å¯¹äº`Sub.prototype.constructor = Sub`çš„è§£é‡Šï¼š

å¦‚æœä¸æŒ‡å®šï¼Œåˆ™å…¶æ„é€ å‡½æ•°æ‰¾çš„ new Supper() æ˜¯ä»é¡¶å±‚Objectç»§æ‰¿æ¥çš„æ„é€ å‡½æ•°,æŒ‡å‘`Supper()`

![image-20210801014827238](https://i.loli.net/2021/08/01/6XphW72eLlnFaxQ.png)

### å€Ÿç”¨æ„é€ å‡½æ•° 

> å¾—åˆ°å±æ€§

```JS
function Parent(xxx){		// 1.  å®šä¹‰çˆ¶ç±»å‹æ„é€ å‡½æ•°
    this.xxx = xxx
}		
Parent.prototype.test = function(){};
function Child(xxx,yyy){			// 2.  å®šä¹‰å­ç±»å‹æ„é€ å‡½æ•°
    Parent.call(this, xxx);//å€Ÿç”¨æ„é€ å‡½æ•°   this.Parent(xxx)
    this.yyy = yyy
}
var child = new Child('a', 'b');  //child.xxxä¸º'a',child.yyyä¸º'b', ä½†childæ²¡æœ‰test()
```

### ç»„åˆç»§æ‰¿

> åŸå‹é“¾+å€Ÿç”¨æ„é€ å‡½æ•°çš„ç»„åˆç»§æ‰¿

1. åˆ©ç”¨åŸå‹é“¾å®ç°å¯¹çˆ¶ç±»å‹å¯¹è±¡çš„æ–¹æ³•ç»§æ‰¿
2. åˆ©ç”¨super()å€Ÿç”¨çˆ¶ç±»å‹æ„å»ºå‡½æ•°åˆå§‹åŒ–ç›¸åŒå±æ€§

```JS
function Parent(xxx){
    this.xxx = xxx
}
Parent.prototype.test = function(){};
function Child(xxx,yyy){
    Parent.call(this, xxx);//å€Ÿç”¨æ„é€ å‡½æ•°   this.Parent(xxx)
    this.yyy = yyy
}
Child.prototype = new Parent(); //å¾—åˆ°test()
Child.prototype.constructer = Child		//ä¿®æ­£constructorå±æ€§
Child.prototype.text2 = function() { }
var child = new Child('a', 'b'); //child.xxxä¸º'a',child.yyyä¸º'b',ä¹Ÿæœ‰test(),text2()
```

newä¸€ä¸ªå¯¹è±¡èƒŒååšäº†äº›ä»€ä¹ˆ?
* åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡
* ç»™å¯¹è±¡è®¾ç½®`__proto__`, å€¼ä¸ºæ„é€ å‡½æ•°å¯¹è±¡çš„prototypeå±æ€§å€¼   `this.__proto__ = Fn.prototype`
* æ‰§è¡Œæ„é€ å‡½æ•°ä½“(ç»™å¯¹è±¡æ·»åŠ å±æ€§/æ–¹æ³•)





# çº¿ç¨‹æœºåˆ¶ä¸äº‹ä»¶

## çº¿ç¨‹ä¸è¿›ç¨‹

![1](https://i.loli.net/2021/08/02/CjBy8IaplMmcVsf.png)

### è¿›ç¨‹

* ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œ, å®ƒå æœ‰ä¸€ç‰‡ç‹¬æœ‰çš„å†…å­˜ç©ºé—´
* å¯ä»¥é€šè¿‡windowsä»»åŠ¡ç®¡ç†å™¨æŸ¥çœ‹è¿›ç¨‹

### çº¿ç¨‹

* æ˜¯è¿›ç¨‹å†…çš„ä¸€ä¸ªç‹¬ç«‹æ‰§è¡Œå•å…ƒ
* æ˜¯ç¨‹åºæ‰§è¡Œçš„ä¸€ä¸ªå®Œæ•´æµç¨‹
* æ˜¯CPUçš„æœ€å°çš„è°ƒåº¦å•å…ƒ

### å…³ç³»

> ç¨‹åºæ˜¯åœ¨æŸä¸ªè¿›ç¨‹ä¸­çš„æŸä¸ªçº¿ç¨‹æ‰§è¡Œçš„

1. åº”ç”¨ç¨‹åºå¿…é¡»è¿è¡Œåœ¨æŸä¸ªè¿›ç¨‹çš„æŸä¸ªçº¿ç¨‹ä¸Š
2. ä¸€ä¸ªè¿›ç¨‹ä¸­è‡³å°‘æœ‰ä¸€ä¸ªè¿è¡Œçš„çº¿ç¨‹:==ä¸»çº¿ç¨‹ ==-->è¿›ç¨‹å¯åŠ¨åè‡ªåŠ¨åˆ›å»º
3. ä¸€ä¸ªè¿›ç¨‹ä¸­ä¹Ÿå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼›æ­¤æ—¶æˆ‘ä»¬ä¼šè¯´è¿™ä¸ªç¨‹åºæ˜¯å¤šçº¿ç¨‹è¿è¡Œçš„
4. å¤šä¸ªè¿›ç¨‹ä¹‹é—´çš„æ•°æ®æ˜¯ä¸èƒ½ç›´æ¥å…±äº«çš„ -->å†…å­˜ç›¸äº’ç‹¬ç«‹(éš”ç¦»)
5. `çº¿ç¨‹æ± (thread pool)`:ä¿å­˜å¤šä¸ªçº¿ç¨‹å¯¹è±¡çš„å®¹å™¨,å®ç°çº¿ç¨‹å¯¹è±¡çš„åå¤åˆ©ç”¨

### å¼•å‡ºçš„é—®é¢˜

#### â‘  ä½•ä¸ºå¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹?

> å¤šè¿›ç¨‹è¿è¡Œ: ä¸€åº”ç”¨ç¨‹åºå¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªå®ä¾‹è¿è¡Œ
>
> å¤šçº¿ç¨‹: åœ¨ä¸€ä¸ªè¿›ç¨‹å†…, åŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹è¿è¡Œ

#### â‘¡æ¯”è¾ƒå•çº¿ç¨‹ä¸å¤šçº¿ç¨‹?

##### å¤šçº¿ç¨‹

ä¼˜ç‚¹ï¼šèƒ½æœ‰æ•ˆæå‡CPUçš„åˆ©ç”¨ç‡

> ç¼ºç‚¹ï¼š
>
> - åˆ›å»ºå¤šçº¿ç¨‹å¼€é”€
> - çº¿ç¨‹é—´åˆ‡æ¢å¼€é”€
> - æ­»é”ä¸çŠ¶æ€åŒæ­¥é—®é¢˜

##### å•çº¿ç¨‹

- ä¼˜ç‚¹ï¼šé¡ºåºç¼–ç¨‹ç®€å•æ˜“æ‡‚
- ç¼ºç‚¹ï¼šæ•ˆç‡ä½

#### â‘¢ JavaScript æ˜¯å•çº¿ç¨‹è¿˜æ˜¯å¤šçº¿ç¨‹?

> JSæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ , ä½†ä½¿ç”¨H5ä¸­çš„ Web Workerså¯ä»¥å¤šçº¿ç¨‹è¿è¡Œ
>

- åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å»æ“ä½œDOMç•Œé¢



## å®šæ—¶å™¨å¼•å‘çš„æ€è€ƒ

##### å®šæ—¶å™¨çœŸæ˜¯å®šæ—¶æ‰§è¡Œçš„å—ï¼Ÿ

> å®šæ—¶å™¨å¹¶ä¸èƒ½ä¿è¯çœŸæ­£å®šæ—¶æ‰§è¡Œ
> ä¸€èˆ¬ä¼šå»¶è¿Ÿä¸€ä¸ç‚¹ï¼ˆå¯ä»¥æ¥å—ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½å»¶è¿Ÿå¾ˆé•¿æ—¶é—´ï¼ˆä¸èƒ½æ¥å—ï¼‰

##### å®šæ—¶å™¨å›è°ƒå‡½æ•°æ˜¯åœ¨åˆ†çº¿ç¨‹æ‰§è¡Œçš„å—ï¼Ÿ

> åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ï¼Œjsæ˜¯å•çº¿ç¨‹çš„
>

##### å®šæ—¶å™¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

> äº‹ä»¶å¾ªç¯æ¨¡å‹
>

```js
<button id="btn">å¯åŠ¨å®šæ—¶å™¨</button>
<script>
    document.getElementById('btn').onclick = function(){
    	//è·å–å½“å‰æ—¶é—´
        var start = Date.now()
        console.log('å¯åŠ¨å®šæ—¶å™¨å‰...')
        setTimeoutï¼ˆfunction(){
            console.log('å®šæ—¶å™¨æ‰§è¡Œäº†'ï¼ŒDate.now()-start) //å®šæ—¶å™¨å¹¶ä¸èƒ½ä¿è¯çœŸæ­£å®šæ—¶æ‰§è¡Œï¼
        },200ï¼‰
        console.log('å¯åŠ¨å®šæ—¶å™¨å')  
    }
	//æ—¶é—´é•¿çš„ä»»åŠ¡
	for(var a = 0;a < 1000000;a++){
        
    }
</script>
```





## jsçº¿ç¨‹

##### å¦‚ä½•è¯æ˜jsæ‰§è¡Œæ—¶å•çº¿ç¨‹çš„ï¼Ÿ

> - setTimeoutï¼ˆï¼‰çš„å›è°ƒå‡½æ•°æ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„
> - å®šæ—¶å™¨å›è°ƒå‡½æ•°åªæœ‰åœ¨è¿è¡Œæ ˆä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œä¹‹åæ‰æœ‰å¯èƒ½æ‰§è¡Œ

##### ä¸ºä»€ä¹ˆjsè¦ç”¨å•çº¿ç¨‹æ¨¡å¼ï¼Œè€Œä¸æ˜¯å¤šçº¿ç¨‹æ¨¡å¼ï¼Ÿ

> Javascriptçš„å•çº¿ç¨‹ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ä½œä¸ºã€‚æµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº¤äº’ï¼Œä»¥åŠæ“ä½œDOMï¼Œè¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚

##### ä»£ç çš„åˆ†ç±»

> - åˆå§‹åŒ–ä»£ç 
> - å›è°ƒä»£ç 

##### jså¼•æ“æ‰§è¡Œä»£ç çš„åŸºæœ¬æµç¨‹

> å…ˆæ‰§è¡Œåˆå§‹åŒ–ä»£ç ï¼šåŒ…å«ä¸€äº›ç‰¹åˆ«çš„ä»£ç ï¼Œæ¯”å¦‚è®¾ç½®å®šæ—¶å™¨ã€ç»‘å®šäº‹ä»¶ç›‘å¬ã€å‘é€ajaxè¯·æ±‚
> åé¢åœ¨æŸäº›æ—¶åˆ»æ‰ä¼šæ‰§è¡Œå›è°ƒä»£ç 

* jsæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„(å›è°ƒå‡½æ•°ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹)
* H5æå‡ºäº†å®ç°å¤šçº¿ç¨‹çš„æ–¹æ¡ˆ: Web Workers
* åªèƒ½æ˜¯ä¸»çº¿ç¨‹sæ›´æ–°ç•Œé¢





## æµè§ˆå™¨çš„æ—¶é—´å¾ªç¯ï¼ˆè½®è¯¢ï¼‰æ¨¡å‹

### æ¨¡å‹åŸç†å›¾

äº‹ä»¶é˜Ÿåˆ—ï¼šJSå¼•æ“é‡åˆ°ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶åå¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šå°†è¿™ä¸ªäº‹ä»¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡,å½“ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶è¿”å›ç»“æœåï¼Œjsä¼šå°†è¿™ä¸ªäº‹ä»¶åŠ å…¥ä¸å½“å‰æ‰§è¡Œæ ˆä¸åŒçš„å¦ä¸€ä¸ªé˜Ÿåˆ—

![äº‹ä»¶å¾ªç¯æ¨¡å‹](https://i.loli.net/2021/08/02/tcNsnQIEdvSiYO9.png)

#### æ¨¡å‹çš„2ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†

1. äº‹ä»¶ï¼ˆå®šæ—¶å™¨/DOMäº‹ä»¶/Ajaxï¼‰ç®¡ç†æ¨¡å—
2. å›è°ƒé˜Ÿåˆ—

### æ¨¡å‹çš„è¿è½¬æµç¨‹

1. æ‰§è¡Œåˆå§‹åŒ–ä»£ç ï¼Œå°†äº‹ä»¶å›è°ƒå‡½æ•°äº¤ç»™å¯¹åº”æ¨¡å—ç®¡ç†
2. å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç®¡ç†æ¨¡å—ä¼šå°†å›è°ƒå‡½æ•°åŠå…¶æ•°æ®æ·»åŠ åˆ°å›è°ƒé˜Ÿåˆ—ä¸­
3. åªæœ‰å½“åˆå§‹åŒ–ä»£ç æ‰§è¡Œå®Œåï¼ˆå¯èƒ½è¦ä¸€å®šæ—¶é—´ï¼‰ï¼Œæ‰ä¼šéå†å»å›è°ƒé˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œã€‚

### å†…å­˜ç®¡ç†æœºåˆ¶

![wechatimg104](https://user-gold-cdn.xitu.io/2018/6/13/163f6b03478ae38a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

#### æ ˆå­˜å‚¨

ğŸŒŸ**æ ˆé‡Œçš„ä»£ç å…ˆè¡Œæ‰§è¡Œ**ï¼Œå†ä»é˜Ÿåˆ—ä¸­ä¾æ¬¡è¯»äº‹ä»¶ï¼ŒåŠ å…¥æ ˆä¸­æ‰§è¡Œ

æ ˆå†…å­˜ä¸€èˆ¬å‚¨å­˜åŸºç¡€æ•°æ®ç±»å‹

```
 Number String Null Undefined Boolean å‡½æ•°
 (es6æ–°å¼•å…¥äº†ä¸€ç§æ•°æ®ç±»å‹ï¼ŒSymbol)
```

> - å­˜å‚¨åŸºç¡€æ•°æ®ç±»å‹
> - æŒ‰å€¼è®¿é—®
> - å­˜å‚¨çš„å€¼å¤§å°å›ºå®š
> - ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å†…å­˜ç©ºé—´
> - ç©ºé—´å°ï¼Œè¿è¡Œæ•ˆç‡é«˜
> - å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º
> - æ ˆä¸­çš„DOMï¼Œajaxï¼ŒsetTimeoutä¼šä¾æ¬¡è¿›å…¥åˆ°é˜Ÿåˆ—ä¸­,å½“æ ˆä¸­ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œå†å°†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­ä¾æ¬¡æ‰§è¡Œã€‚
> - å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡

#### å †å­˜å‚¨

> - å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹
> - æŒ‰å¼•ç”¨è®¿é—®
> - å­˜å‚¨çš„å€¼å¤§å°ä¸å®šï¼Œå¯åŠ¨æ€è°ƒæ•´
> - ä¸»è¦ç”¨æ¥å­˜æ”¾å¯¹è±¡
> - ç©ºé—´å¤§ï¼Œä½†æ˜¯è¿è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒä½
> - æ— åºå­˜å‚¨ï¼Œå¯æ ¹æ®å¼•ç”¨ç›´æ¥è·å–

### ğŸŒ°

```js
console.log(1)
let promise = new Promise(function(resolve,reject){
    console.log(3)
    resolve(100)
}).then(function(data){
    console.log(100)
})
setTimeout(function(){
    console.log(4);
})
console.log(2)

```

> ä¸Šé¢è¿™ä¸ªdemoçš„ç»“æœå€¼æ˜¯ 1 3 2 100 4
>
> ğŸŒŸsetTimeoutæ˜¯å®ä»»åŠ¡,è€ŒPromise.thenæ˜¯å¾®ä»»åŠ¡ è¿™é‡Œçš„new Promise()æ˜¯åŒæ­¥çš„,æ‰€ä»¥æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚
>
> 1. new Promiseçš„æ—¶å€™ï¼Œexcutorå‡½æ•°æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œ
> 2. åŸºäºthenæˆ–è€…catchå­˜æ”¾çš„æ˜¯å¼‚æ­¥çš„

åŒæ­¥ä»»åŠ¡ â€”â€”> å¾®ä»»åŠ¡ â€”â€”> å®ä»»åŠ¡

#### å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡

> æ¦‚å¿µï¼šå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡éƒ½æ˜¯å±äºé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯æ”¾åœ¨æ ˆä¸­

æ–°çš„ğŸŒ°

```js
console.log('1');

setTimeout(function() {
  console.log('setTimeout');
}, 0);

Promise.resolve().then(function() {
  console.log('promise1');
}).then(function() {
  console.log('promise2');
});

console.log('2');
```

> 1 2 promise1 promise2 setTimeout

##### å®ä»»åŠ¡

æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—`JS`å†…éƒ¨å®ä»»åŠ¡ä¸DOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªtaskæ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ ï¼ˆtask->æ¸²æŸ“->task->â€¦ï¼‰ é¼ æ ‡ç‚¹å‡»ä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶å›è°ƒï¼Œéœ€è¦æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åè§£æHTMLã€‚

å®ä»»åŠ¡é˜Ÿåˆ—ï¼šI/Oã€å®šæ—¶å™¨ã€äº‹ä»¶ç»‘å®šã€`ajax`

> **setTimeoutä¸ä¸€æ ·**ï¼Œ**setTimeoutçš„ä½œç”¨æ˜¯ç­‰å¾…ç»™å®šçš„æ—¶é—´åä¸ºå®ƒçš„å›è°ƒäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä»»åŠ¡**ã€‚
>
> - æ‰“å°â€˜**promise1** , **promise2**â€™æ˜¯ç¬¬ä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢çš„äº‹æƒ…ï¼Œè€Œâ€˜**setTimeout**â€™æ˜¯**å¦ä¸€ä¸ªæ–°çš„ç‹¬ç«‹çš„**ä»»åŠ¡é‡Œé¢æ‰“å°çš„ã€‚

##### å¾®ä»»åŠ¡

é€šå¸¸æ¥è¯´å°±æ˜¯éœ€è¦åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ 

> å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼š`Promise.then`/catchã€finallyã€`process.nextTick`



## [H5 Web Workers](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers)

### æ–æ³¢æ‹‰å¥‘æ•°åˆ—

```js
<input type="text" placeholder="æ•°å€¼" id="number">
<button id="btn">è®¡ç®—</button>

<script type="text/javascript">
var fibonacci = function (n) {
    let n1 = 1; n2 = 1;
    for (let i = 2; i < n; i++) {
        [n1, n2] = [n2, n1 + n2]
    }
    return n2
}

 var input = document.getElementById('number')
 document.getElementById('btn').onclick = function () {
   var number = input.value
   var result = fibonacci(number)
   alert(result)
 }
</script>
```

> å½“æˆ‘è¿è¡Œæ­¤è¡Œä»£ç ,ä¼ å…¥è®¡ç®—æ•°å€¼ä¸º50å·¦å³(æœ‰çš„ç”šè‡³æ›´ä½),æ•´ä¸ªé¡µé¢å°±ä¼šå¡ä½å¥½ä¹…çš„æ—¶é—´ä¸èƒ½æ“ä½œ(è®¡ç®—ç»“æŸåæ‰ä¼šå¼¹çª—,ä½†æ˜¯æœªå¼¹çª—çš„è¿™æ®µæ—¶é—´ç”¨æˆ·å¹¶ä¸èƒ½è¿›è¡Œæ“ä½œ),è¿™æ—¶å€™å°±ä¼šå‘ç°å•çº¿ç¨‹çš„å¼Šç«¯äº†

### Web Workers

> å¯ä»¥è®©jsåœ¨åˆ†çº¿ç¨‹æ‰§è¡Œ

1. ç›¸å…³API

> - Worker: æ„é€ å‡½æ•°, åŠ è½½åˆ†çº¿ç¨‹æ‰§è¡Œçš„jsæ–‡ä»¶
> - Worker.prototype.onmessage: ç”¨äºæ¥æ”¶å¦ä¸€ä¸ªçº¿ç¨‹çš„å›è°ƒå‡½æ•°
> - Worker.prototype.postMessage: å‘å¦ä¸€ä¸ªçº¿ç¨‹å‘é€æ¶ˆæ¯

2. ä¸è¶³

> - workerå†…ä»£ç ä¸èƒ½æ“ä½œDOM(æ›´æ–°UI)
> - ä¸èƒ½è·¨åŸŸåŠ è½½JS
> - ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªæ–°ç‰¹æ€§
> - ä¹Ÿæ…¢

3. Worker

```
var worker = new Worker('worker.js');
worker.onMessage = function(event){event.data} : ç”¨æ¥æ¥æ”¶å¦ä¸€ä¸ªçº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®çš„å›è°ƒ
worker.postMessage(data1) : å‘å¦ä¸€ä¸ªçº¿ç¨‹å‘é€æ•°æ®
```

#### ä¸»çº¿ç¨‹

1. åˆ›å»ºä¸€ä¸ªWorkerå¯¹è±¡
2. ç»‘å®š[ä¸»çº¿ç¨‹æ¥æ”¶åˆ†çº¿ç¨‹è¿”å›çš„æ•°æ®]æ–¹æ³•
3. ä¸»çº¿ç¨‹å‘åˆ†çº¿ç¨‹å‘é€æ•°æ®,ç„¶åç­‰å¾…æ¥å—æ•°æ®
4. æ¥æ”¶åˆ°åˆ†çº¿ç¨‹å›é¦ˆçš„æ•°æ®,å°†æ•°æ®è¿›è¡Œå¤„ç†(å¦‚å¼¹çª—)

```js
<body>
<input type="text" placeholder="æ•°å€¼" id="number">
<button id="btn">è®¡ç®—</button>
<script type="text/javascript">
 var input = document.getElementById('number')
 document.getElementById('btn').onclick = function () {
   var number = input.value

   //åˆ›å»ºä¸€ä¸ªWorkerå¯¹è±¡
   var worker = new Worker('worker.js')
   // ç»‘å®šæ¥æ”¶æ¶ˆæ¯çš„ç›‘å¬
   worker.onmessage = function (event) { //æ­¤å¤„å˜æˆå›è°ƒä»£ç ,ä¼šåœ¨åˆå§‹åŒ–å·¥ä½œå®Œæˆåæ‰ä¼šè¿›è¡Œ
     console.log('ä¸»çº¿ç¨‹æ¥æ”¶åˆ†çº¿ç¨‹è¿”å›çš„æ•°æ®: '+event.data)
     alert(event.data)
   }

   // å‘åˆ†çº¿ç¨‹å‘é€æ¶ˆæ¯
   worker.postMessage(number)
   console.log('ä¸»çº¿ç¨‹å‘åˆ†çº¿ç¨‹å‘é€æ•°æ®: '+number)
 }
 // console.log(this) // window

</script>
</body>
```



#### åˆ†çº¿ç¨‹

> å°†è®¡ç®—æ”¾ç½®åˆ†çº¿ç¨‹ä¸­

åœ¨åˆ†çº¿ç¨‹ä¸­è¾“å‡º this 





#### åŸç†å›¾

![H5 Web Workers(å¤šçº¿ç¨‹)](https://i.loli.net/2021/08/02/FLJTG2Wxy1PVKmd.png)









# æ·±æµ…æ‹·è´

## æµ…æ‹·è´

æµ…æ‹·è´ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾å‡†æ‹·è´ï¼š

1. å¦‚æœåŸå§‹å¯¹è±¡å±æ€§ç±»å‹ä¸ºåŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå› æ­¤ä¿®æ”¹åŸã€æ–°å¯¹è±¡çš„åŸºæœ¬ç±»å‹å±æ€§äº’ä¸å½±å“
2. å¦‚æœåŸå§‹å¯¹è±¡å±æ€§ç±»å‹ä¸ºå¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ï¼ˆæˆ–æŒ‡å‘è¯¥åœ°å€çš„æŒ‡é’ˆï¼‰ï¼Œå› æ­¤ä¿®æ”¹åŸã€æ–°å¯¹è±¡çš„å¼•ç”¨ç±»å‹å±æ€§ä¼šç›¸äº’å½±å“

```js
let person = {
	name: 'æå››',
	age: 18,
    other: {
        name: 'hello'
    }
}

function copy(obj){
	let objCopy = {}
	for(let i in obj){
		objCopy[i] = obj[i]
	}
    return objCopy
}

person.name = 'å¼ ä¸‰'
person.other.name = 'ooooooo'
const newObj = copy(person)
console.log('person',person)
console.log('newObj',newObj)
```

![image-20210801215521651](C:\Users\Area1\AppData\Roaming\Typora\typora-user-images\image-20210801215521651.png)

## æ·±æ‹·è´

> åŸç†ï¼šå®Œå…¨å¤åˆ¶å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨ä¹Ÿæ˜¯è‡ªå·±åˆ›å»ºã€‚å³å®Œæ•´å¤åˆ¶èˆ’æœçš„å€¼ï¼ˆè€Œéå¼•ç”¨ï¼‰ã€‚ç›®çš„åœ¨äºé¿å…æ‹·è´åæ•°æ®å¯¹åŸæ•°æ®äº§ç”Ÿå½±å“

å®ç°æ·±æ‹·è´çš„æ–¹å¼

![image-20210801192711925](https://i.loli.net/2021/08/01/1PkX2xq5OZvlfz9.png)

1. `JSON` æ–¹æ³•å®ç°

   ```js
   let person = {
   	name: 'å¼ ä¸‰',
   	age: 14,
       other: {
           name: 'hello'
       }
   }
   
   function copy(obj){
   	let str = JSON.stringify(obj)
   	let newObj = JSON.parse(str)
   	return newObj
   }
   
   const obj1 = copy(person)
   person.other.name = 'æå››'
   person.name = 'wang'
   console.log('person',person)
   console.log('obj1',obj1)
   ```

2. æ‰‹å†™é€’å½’æ–¹æ³•ï¼šé€’å½’æ–¹æ³•å®ç°æ·±åº¦å…‹éš†åŸç†ï¼šéå†å¯¹è±¡ã€æ•°ç»„ç›´åˆ°é‡Œè¾¹éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå†å»å¤åˆ¶ï¼Œå°±æ˜¯æ·±åº¦æ‹·è´

   ```js
   let person = {
   	name: 'å¼ ä¸‰',
   	age: 14,
       other: {
           name: 'hello'
       }
   }
   
   function copy(obj){
   	let newObj = {}
   	for(let i in obj){
   		if(obj[i] instanceof Object){
   			obj[i] = copy(obj[i])
   		}else{
   			newObj[i] = obj[i]
   		}
   	}
   	return newObj
   }
   
   const obj1 = copy(person)
   person.other.name = 'æå››'
   person.name = 'wang'
   console.log('person',person)
   console.log('obj1',obj1)
   ```

3. å‡½æ•°åº“`lodash`ï¼šè¯¥å‡½æ•°åº“ä¹Ÿæœ‰æä¾› `_.cloneDeep`ç”¨æ¥åšæ·±æ‹·è´ã€‚

   ```js
   var _ = require('lodash');
   var obj1 = {    
       a: 1, 
       b: { 
           f: { 
               g: 1 
           } 
       },    
       c: [1, 2, 3]
   };
   var obj2 = _.cloneDeep(obj1);
   console.log(obj1.b.f === obj2.b.f);     // false
   ```



# é˜²æŠ–èŠ‚æµ

é™åˆ¶å‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°

## é˜²æŠ–

> å¯¹äº==é«˜é¢‘è§¦å‘==çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³é¢‘å‘è§¦å‘äº‹ä»¶ï¼Œæ¯”å¦‚è¯´æœç´¢æ¡†å®æ—¶å‘è¯·æ±‚ï¼Œonmousemove, resize, onscrollç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¯¹å‡½æ•°å¢åŠ é˜²æŠ–åŠŸèƒ½äº†

é€šè¿‡ `setTimeout` çš„æ–¹å¼ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´é—´éš”å†…ï¼Œå°†å¤šæ¬¡è§¦å‘å˜æˆä¸€æ¬¡è§¦å‘ï¼ˆæœ€åä¸€æ¬¡æ“ä½œï¼‰

```js
<body>
	<input type="text">
	<script>
		let ipt = document.querySelector("input");

		ipt.oninput = debounce(function(){
            console.log(this.value)
        },500)

        function debounce(fn,delay){
            let t = null;
            return function(){
                if(t !== null){
                    clearTimeout(t);
                }
                t = setTimeout(() => {
                    fn.call(this)
                },delay)
            }
		}
	</script>
</body>
```

## èŠ‚æµ

> åœ¨æŸä¸ªè§„å®šçš„æ—¶é—´å†…ï¼ŒèŠ‚æµå‡½æ•°è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚ï¼ˆæ§åˆ¶æ‰§è¡Œæ¬¡æ•°ï¼‰

```js
<style>
	body{
		height: 2000px
	}
</style>


<script>
	let flag = true
	window.onscroll = throttle(function(){
         console.log('ooooo');       
    },500)
    
    function throttle(fn,delay){
    	return function(){
    		if(flag){
            setTimeout(() => {
            	fn.call(this)
                 flag = true
            },delay)
           }
           flag = false
    	}
    }
</script>
```





# æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶

### æµè§ˆå™¨å†…æ ¸æ¨¡å—ç»„æˆ

ä¸»çº¿ç¨‹

> * jså¼•æ“æ¨¡å— : è´Ÿè´£jsç¨‹åºçš„ç¼–è¯‘ä¸è¿è¡Œ
> * html,cssæ–‡æ¡£è§£ææ¨¡å— : è´Ÿè´£é¡µé¢æ–‡æœ¬çš„è§£æ
> * DOM/CSSæ¨¡å— : è´Ÿè´£dom/cssåœ¨å†…å­˜ä¸­çš„ç›¸å…³å¤„ç† 
> * å¸ƒå±€å’Œæ¸²æŸ“æ¨¡å— : è´Ÿè´£é¡µé¢çš„å¸ƒå±€å’Œæ•ˆæœçš„ç»˜åˆ¶(å†…å­˜ä¸­çš„å¯¹è±¡)

åˆ†çº¿ç¨‹

> * å®šæ—¶å™¨æ¨¡å— : è´Ÿè´£å®šæ—¶å™¨çš„ç®¡ç†
> * DOMäº‹ä»¶æ¨¡å— : è´Ÿè´£äº‹ä»¶çš„ç®¡ç†
> * ç½‘ç»œè¯·æ±‚æ¨¡å— : è´Ÿè´£Ajaxè¯·æ±‚



## æµè§ˆå™¨ç»„æˆ

æµè§ˆå™¨ä¸»è¦ç”±7ä¸ªéƒ¨åˆ†ç»„æˆï¼š

- ç”¨æˆ·ç•Œé¢ï¼ˆUser Interfaceï¼‰ï¼šå®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„æµè§ˆå™¨ç»„ä»¶ï¼Œæ¯”å¦‚åœ°å€æ ï¼Œè¿”å›ã€ä¹¦ç­¾ç­‰ç­‰
- æ•°æ®æŒä¹…åŒ–ï¼ˆData Persistenceï¼‰ï¼šæŒ‡æµè§ˆå™¨çš„cookieã€local storageç­‰ç»„ä»¶
- æµè§ˆå™¨å¼•æ“ï¼ˆBrowser engineï¼‰ï¼šå¹³å°åº”ç”¨çš„ç›¸å…³æ¥å£ï¼Œåœ¨ç”¨æˆ·ç•Œé¢å’Œå‘ˆç°å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚
- æ¸²æŸ“å¼•æ“ï¼ˆRendering engineï¼‰ï¼šå¤„ç†HTMLã€CSSçš„è§£æä¸æ¸²æŸ“
- JavaScriptè§£é‡Šå™¨ï¼ˆJavaScript Interpreterï¼‰ï¼šè§£æå’Œæ‰§è¡ŒJavaScriptä»£ç 
- ç”¨æˆ·ç•Œé¢åç«¯ï¼ˆUI Backendï¼‰ï¼šæŒ‡æµè§ˆå™¨çš„çš„å›¾å½¢åº“ç­‰
- ç½‘ç»œï¼ˆNetworkingï¼‰ï¼šç”¨äºç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚HTTPè¯·æ±‚



## æµè§ˆå™¨å†…æ ¸

> æ”¯æ’‘æµè§ˆå™¨è¿è¡Œçš„æœ€æ ¸å¿ƒçš„ç¨‹åº

æµè§ˆå™¨å†…æ ¸åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“

- ==æ¸²æŸ“å¼•æ“==ï¼šè´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥CSSç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœº
- ==JSå¼•æ“==ï¼šè´Ÿè´£è§£æå’Œæ‰§è¡Œjavascriptæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€æ•ˆæœ æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ï¼Œæœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“å¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“

å¸¸è§çš„æµè§ˆå™¨å†…æ ¸ï¼š

> - Chrome, Safari : webkit
> - firefox : Gecko
> - IE : Trident
> - 360,æœç‹—ç­‰å›½å†…æµè§ˆå™¨: Trident + webkit



## é¡µé¢åŠ è½½æµç¨‹

ä»æµè§ˆå™¨åœ°å€ä¸­ä»==è¾“å…¥urlåœ°å€==åˆ°==æ¸²æŸ“å‡ºä¸€ä¸ªé¡µé¢==ï¼Œä¼šç»è¿‡ä»¥ä¸‹è¿‡ç¨‹ã€‚

- DNS æŸ¥è¯¢ï¼šæµè§ˆå™¨è¾“å…¥çš„urlåœ°å€ç»è¿‡DNSè§£æè·å¾—å¯¹åº”çš„`IP`

- TCP è¿æ¥ï¼šå‘æœåŠ¡å™¨å‘èµ·TCPçš„3æ¬¡æ¡æ‰‹

- HTTP è¯·æ±‚å³å“åº”ï¼šå»ºç«‹é“¾æ¥åï¼Œæµè§ˆå™¨å‘è¯¥IPåœ°å€å‘é€httpè¯·æ±‚

- æœåŠ¡å™¨å“åº”ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œè¿”å›ä¸€å † HTML æ ¼å¼çš„å­—ç¬¦ä¸²ä»£ç 

- å®¢æˆ·ç«¯æ¸²æŸ“
  > - æµè§ˆå™¨è·å¾—htmlä»£ç ï¼Œè§£ææˆDOMæ ‘
  > - è·å– CSS å¹¶æ„å»ºCSSOM
  > - å°†DOMä¸ CSSOM ç»“åˆï¼Œåˆ›å»ºæ¸²æŸ“æ ‘
  > - æ ¹æ®æ¸²æŸ“æ ‘æ¥å¸ƒå±€ï¼Œä»¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯
  > - å°†å„ä¸ªèŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Š

éœ€è¦æ˜ç™½ï¼Œè¿™äº”ä¸ªæ­¥éª¤å¹¶ä¸ä¸€å®šä¸€æ¬¡æ€§é¡ºåºå®Œæˆã€‚å¦‚æœ DOM æˆ– CSSOM è¢«ä¿®æ”¹ï¼Œä»¥ä¸Šè¿‡ç¨‹éœ€è¦é‡å¤æ‰§è¡Œï¼Œè¿™æ ·æ‰èƒ½è®¡ç®—å‡ºå“ªäº›åƒç´ éœ€è¦åœ¨å±å¹•ä¸Šè¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚å®é™…é¡µé¢ä¸­ï¼ŒCSS ä¸ JavaScript å¾€å¾€ä¼šå¤šæ¬¡ä¿®æ”¹ DOM å’Œ CSSOMã€‚



## æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶

> ä¸»è¦æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“

![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/b943ce50-aee3-11eb-bf5b-0ff6e87e9df2.png)

### è§£æHTMLæˆDOMæ ‘

è¿™ä¸ªè§£æè¿‡ç¨‹å¤§æ¦‚å¯ä»¥åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼š

![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/18329dc0-af10-11eb-bf5b-0ff6e87e9df2.png)

- ç¬¬ä¸€æ­¥ï¼šæµè§ˆå™¨ä»ç£ç›˜æˆ–ç½‘ç»œè¯»å–HTMLçš„==åŸå§‹å­—èŠ‚==ï¼Œä¹Ÿå°±æ˜¯ä¼ è¾“çš„0å’Œ1è¿™æ ·çš„å­—èŠ‚æ•°æ®ï¼Œå¹¶æ ¹æ®æ–‡ä»¶çš„æŒ‡å®šç¼–ç ï¼ˆä¾‹å¦‚ UTF-8ï¼‰å°†å®ƒä»¬==è½¬æ¢æˆå­—ç¬¦ä¸²==ã€‚
- ç¬¬äºŒæ­¥ï¼šå°†==å­—ç¬¦ä¸²è½¬æ¢æˆToken==,ä¾‹å¦‚ï¼šâ€œâ€ã€â€œâ€ç­‰ã€‚Tokenä¸­ä¼šæ ‡è¯†å‡ºå½“å‰Tokenæ˜¯â€œå¼€å§‹æ ‡ç­¾â€æˆ–æ˜¯â€œç»“æŸæ ‡ç­¾â€äº¦æˆ–æ˜¯â€œæ–‡æœ¬â€ç­‰ä¿¡æ¯
- ç¬¬ä¸‰æ­¥ï¼šåœ¨æ¯ä¸ªTokenè¢«ç”Ÿæˆåï¼Œä¼šç«‹åˆ»æ¶ˆè€—è¿™ä¸ªTokenåˆ›å»ºå‡ºèŠ‚ç‚¹å¯¹è±¡ï¼Œå› æ­¤åœ¨æ„å»ºDOMçš„è¿‡ç¨‹ä¸­ï¼Œä¸æ˜¯ç­‰å¾…æ‰€æœ‰çš„Tokenéƒ½ç”Ÿæˆåæ‰å»æ„å»ºDOM,è€Œæ˜¯==ä¸€è¾¹ç”ŸæˆTokenä¸€è¾¹æ¶ˆè€—æ¥ç”ŸæˆèŠ‚ç‚¹å¯¹è±¡==ã€‚

> æ³¨æ„ï¼šå¸¦æœ‰ç»“æŸæ ‡ç­¾æ ‡è¯†çš„Tokenä¸ä¼šåˆ›å»ºèŠ‚ç‚¹å¯¹è±¡

- ç¬¬å››æ­¥ï¼šé€šè¿‡â€œå¼€å§‹æ ‡ç­¾â€ä¸â€œç»“æŸæ ‡ç­¾â€æ¥è¯†åˆ«å¹¶å…³è”èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å½“æ‰€æœ‰Tokenéƒ½ç”Ÿæˆå¹¶æ¶ˆè€—å®Œæ¯•åï¼Œæˆ‘ä»¬å°±==å¾—åˆ°äº†ä¸€é¢—å®Œæ•´çš„DOMæ ‘==ã€‚

ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªç–‘é—®ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»æ˜¯å¦‚ä½•ç»´æŠ¤çš„å‘¢ï¼Ÿ ä¸Šé¢æˆ‘ä»¬æåˆ°Tokenä¼šæ ‡è¯†æ˜¯â€œå¼€å§‹æ ‡ç­¾â€è¿˜æ˜¯â€œç»“æŸæ ‡ç­¾â€ï¼Œä»¥ä¸‹å›¾ä¸ºä¾‹ï¼šâ€œHelloâ€Tokenä½äºâ€œtitleâ€å¼€å§‹æ ‡ç­¾ä¸â€œtitleâ€ç»“æŸæ ‡ç­¾ä¹‹é—´ï¼Œè¡¨æ˜â€œHelloâ€Tokenæ˜¯â€œtitleâ€Tokençš„å­èŠ‚ç‚¹ã€‚åŒç†â€œtitleâ€Tokenæ˜¯â€œheadâ€Tokençš„å­èŠ‚ç‚¹ã€‚

![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/509917c0-af10-11eb-bf5b-0ff6e87e9df2.png)



### æ„å»ºCSSOM

è§£æcssæ„å»ºCSSOM çš„è¿‡ç¨‹å’Œæ„å»ºDOMçš„è¿‡ç¨‹éå¸¸çš„ç›¸ä¼¼ã€‚å½“æµè§ˆå™¨æ¥æ”¶åˆ°ä¸€æ®µCSSï¼Œæµè§ˆå™¨é¦–å…ˆè¦åšçš„æ˜¯==è¯†åˆ«å‡ºTokenï¼Œç„¶åæ„å»ºèŠ‚ç‚¹å¹¶ç”ŸæˆCSSOM==

![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/797154a0-af10-11eb-bf5b-0ff6e87e9df2.png)

èŠ‚ç‚¹ä¸­æ ·å¼å¯ä»¥é€šè¿‡ç»§æ‰¿å¾—åˆ°ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œå› æ­¤åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­æµè§ˆå™¨å¾—é€’å½’ CSSOM æ ‘ï¼Œç„¶åç¡®å®šå…·ä½“çš„å…ƒç´ åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å¼ã€‚ä¸ºäº†CSSOMçš„å®Œæ•´æ€§ï¼Œä¹Ÿåªæœ‰ç­‰æ„å»ºå®Œæ¯•æ‰èƒ½è¿›å…¥åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œå“ªæ€•DOMå·²ç»æ„å»ºå®Œï¼Œå®ƒä¹Ÿå¾—ç­‰CSSOMï¼Œç„¶åæ‰èƒ½è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚

> CSSåŒ¹é…HTMLå…ƒç´ æ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚å’Œæœ‰æ€§èƒ½é—®é¢˜çš„äº‹æƒ…ã€‚æ‰€ä»¥ï¼ŒDOMæ ‘è¦å°ï¼ŒCSSå°½é‡ç”¨idå’Œclassï¼Œåƒä¸‡ä¸è¦è¿‡æ¸¡å±‚å ä¸‹å» æ‰€ä»¥ï¼ŒCSSçš„åŠ è½½é€Ÿåº¦ä¸æ„å»ºCSSOMçš„é€Ÿåº¦å°†ç›´æ¥å½±å“é¦–å±æ¸²æŸ“é€Ÿåº¦ï¼Œå› æ­¤åœ¨é»˜è®¤æƒ…å†µä¸‹CSSè¢«è§†ä¸ºé˜»å¡æ¸²æŸ“çš„èµ„æº

### æ„å»ºæ¸²æŸ“æ ‘

å½“æˆ‘ä»¬ç”ŸæˆDOMæ ‘å’ŒCSSOMæ ‘åï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸¤é¢—æ ‘åˆå¹¶æˆæ¸²æŸ“æ ‘ï¼Œåœ¨æ„å»ºæ¸²æŸ“æ ‘çš„è¿‡ç¨‹ä¸­æµè§ˆå™¨éœ€è¦åšå¦‚ä¸‹å·¥ä½œï¼š

- ä» DOM æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ¯ä¸ªå¯è§èŠ‚ç‚¹ã€‚
- æœ‰äº›èŠ‚ç‚¹ä¸å¯è§ï¼ˆä¾‹å¦‚è„šæœ¬Tokenã€å…ƒTokenç­‰ï¼‰ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šä½“ç°åœ¨æ¸²æŸ“è¾“å‡ºä¸­ï¼Œæ‰€ä»¥ä¼šè¢«å¿½ç•¥ã€‚
- æŸäº›èŠ‚ç‚¹è¢«CSSéšè—ï¼Œå› æ­¤åœ¨æ¸²æŸ“æ ‘ä¸­ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ä¾‹å¦‚æŸäº›èŠ‚ç‚¹è®¾ç½®äº†display: noneå±æ€§ã€‚
- å¯¹äºæ¯ä¸ªå¯è§èŠ‚ç‚¹ï¼Œä¸ºå…¶æ‰¾åˆ°é€‚é…çš„ CSSOM è§„åˆ™å¹¶åº”ç”¨å®ƒä»¬ ![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/3e1e73a0-af11-11eb-bf5b-0ff6e87e9df2.png)

### æ¸²æŸ“é˜»å¡

åœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€ä¸ªscriptæ ‡è®°æ—¶ï¼Œå°±ä¼šåœæ­¢æ¸²æŸ“ï¼Œå»è¯·æ±‚è„šæœ¬æ–‡ä»¶å¹¶æ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼Œå› ä¸ºæµè§ˆå™¨æ¸²æŸ“å’Œ JS æ‰§è¡Œå…±ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œä¸”è¿™é‡Œå¿…é¡»æ˜¯å•çº¿ç¨‹æ“ä½œï¼Œ==å¤šçº¿ç¨‹ä¼šäº§ç”Ÿæ¸²æŸ“ DOM å†²çª==ã€‚JavaScriptçš„åŠ è½½ã€è§£æä¸æ‰§è¡Œä¼šä¸¥é‡é˜»å¡DOMçš„æ„å»ºã€‚åªæœ‰ç­‰åˆ°è„šæœ¬æ–‡ä»¶æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šå»ç»§ç»­æ„å»ºDOMã€‚

jsä¸å•ä¼šé˜»å¡DOMæ„å»ºï¼Œè¿˜ä¼šå¯¼è‡´CSSOMä¹Ÿé˜»å¡DOMçš„æ„å»ºï¼Œå¦‚æœJavaScriptè„šæœ¬è¿˜æ“ä½œäº†CSSOMï¼Œè€Œæ­£å¥½è¿™ä¸ªCSSOMè¿˜æ²¡æœ‰ä¸‹è½½å’Œæ„å»ºï¼Œæµè§ˆå™¨ç”šè‡³ä¼šå»¶è¿Ÿè„šæœ¬æ‰§è¡Œå’Œæ„å»ºDOMï¼Œç›´è‡³å®Œæˆå…¶CSSOMçš„ä¸‹è½½å’Œæ„å»ºï¼Œç„¶åå†æ‰§è¡ŒJavaScriptï¼Œæœ€ååœ¨ç»§ç»­æ„å»ºDOM

å› æ­¤scriptçš„ä½ç½®å¾ˆé‡è¦ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­éµå¾ªä»¥ä¸‹ä¸¤ä¸ªåŸåˆ™ï¼š

- CSS ä¼˜å…ˆï¼šå¼•å…¥é¡ºåºä¸Šï¼ŒCSS èµ„æºå…ˆäº JavaScript èµ„æºã€‚
- JSç½®åï¼šæˆ‘ä»¬é€šå¸¸æŠŠJSä»£ç æ”¾åˆ°é¡µé¢åº•éƒ¨ï¼Œä¸”JavaScript åº”å°½é‡å°‘å½±å“ DOM çš„æ„å»º

### å¸ƒå±€ä¸ç»˜åˆ¶

æµè§ˆå™¨æ‹¿åˆ°æ¸²æŸ“æ ‘åï¼Œå°±ä¼šä»æ¸²æŸ“æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œç„¶åç¡®å®šæ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡åœ¨é¡µé¢ä¸Šçš„ç¡®åˆ‡å¤§å°ä¸ä½ç½®ï¼Œé€šå¸¸è¿™ä¸€è¡Œä¸ºä¹Ÿè¢«ç§°ä¸ºâ€œè‡ªåŠ¨é‡æ’â€ã€‚å¸ƒå±€é˜¶æ®µçš„è¾“å‡ºæ˜¯ä¸€ä¸ªç›’å­æ¨¡å‹ï¼Œå®ƒä¼šç²¾ç¡®åœ°æ•è·æ¯ä¸ªå…ƒç´ åœ¨å±å¹•å†…çš„ç¡®åˆ‡ä½ç½®ä¸å¤§å°ï¼Œæ‰€æœ‰ç›¸å¯¹æµ‹é‡å€¼éƒ½å°†è½¬æ¢ä¸ºå±å¹•ä¸Šçš„ç»å¯¹åƒç´ ã€‚è¿™ä¸€è¿‡ç¨‹ä¹Ÿå¯ç§°ä¸ºå›æµ

å¸ƒå±€å®Œæˆåï¼Œæµè§ˆå™¨ä¼šç«‹å³å‘å‡ºâ€œPaint Setupâ€å’Œâ€œPaintâ€äº‹ä»¶ï¼Œå°†æ¸²æŸ“æ ‘è½¬æ¢æˆå±å¹•ä¸Šçš„åƒç´ ã€‚

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

åœ¨æˆ‘ä»¬äº†è§£æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶åï¼ŒDOM å’Œ CSSOM ç»“æ„æ„å»ºé¡ºåºï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ€§èƒ½ä¼˜åŒ–é—®é¢˜ç»™å‡ºä¸€äº›æ–¹æ¡ˆï¼Œæå‡é¡µé¢æ€§èƒ½ã€‚

### å›æµ(reflow)ä¸é‡ç»˜(repaint)

å½“å…ƒç´ çš„æ ·å¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨éœ€è¦è§¦å‘æ›´æ–°ï¼Œé‡æ–°ç»˜åˆ¶å…ƒç´ ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„æ“ä½œï¼Œå³é‡ç»˜ä¸å›æµã€‚

- é‡ç»˜(repaint): å½“å…ƒç´ æ ·å¼çš„æ”¹å˜ä¸å½±å“å¸ƒå±€æ—¶ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨é‡ç»˜å¯¹å…ƒç´ è¿›è¡Œæ›´æ–°ï¼Œæ­¤æ—¶ç”±äºåªéœ€è¦UIå±‚é¢çš„é‡æ–°åƒç´ ç»˜åˆ¶ï¼Œå› æ­¤æŸè€—è¾ƒå°‘
- å›æµ(reflow): å½“å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„æˆ–è§¦å‘æŸäº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œç§°ä¸ºå›æµã€‚æ­¤æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°ç»è¿‡è®¡ç®—ï¼Œè®¡ç®—åè¿˜éœ€è¦é‡æ–°é¡µé¢å¸ƒå±€ï¼Œå› æ­¤æ˜¯è¾ƒé‡çš„æ“ä½œã€‚ä¼šè§¦å‘å›æµçš„æ“ä½œ:
- æ·»åŠ æˆ–åˆ é™¤å¯è§çš„DOMå…ƒç´ 
- å…ƒç´ çš„ä½ç½®å‘ç”Ÿå˜åŒ–
- å…ƒç´ çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼ˆåŒ…æ‹¬å¤–è¾¹è·ã€å†…è¾¹æ¡†ã€è¾¹æ¡†å¤§å°ã€é«˜åº¦å’Œå®½åº¦ç­‰ï¼‰
- å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚æ–‡æœ¬å˜åŒ–æˆ–å›¾ç‰‡è¢«å¦ä¸€ä¸ªä¸åŒå°ºå¯¸çš„å›¾ç‰‡æ‰€æ›¿ä»£ã€‚
- é¡µé¢ä¸€å¼€å§‹æ¸²æŸ“çš„æ—¶å€™ï¼ˆè¿™è‚¯å®šé¿å…ä¸äº†ï¼‰
- æµè§ˆå™¨çš„çª—å£å°ºå¯¸å˜åŒ–ï¼ˆå› ä¸ºå›æµæ˜¯æ ¹æ®è§†å£çš„å¤§å°æ¥è®¡ç®—å…ƒç´ çš„ä½ç½®å’Œå¤§å°çš„

> æ³¨æ„ï¼šå›æµä¸€å®šä¼šè§¦å‘é‡ç»˜ï¼Œè€Œé‡ç»˜ä¸ä¸€å®šä¼šå›æµ,é‡ç»˜çš„å¼€é”€è¾ƒå°ï¼Œå›æµçš„ä»£ä»·è¾ƒé«˜

å› æ­¤ä¸ºäº†å‡å°‘æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å°½é‡é¿å…å›æµæˆ–è€…é‡ç»˜æ“ä½œ css

- é¿å…ä½¿ç”¨tableå¸ƒå±€
- å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°positionå±æ€§ä¸ºabsoluteæˆ–fixedçš„å…ƒç´ ä¸Š

javascript

- é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œå¯æ±‡æ€»åç»Ÿä¸€ ä¸€æ¬¡ä¿®æ”¹
- å°½é‡ä½¿ç”¨classè¿›è¡Œæ ·å¼ä¿®æ”¹
- å‡å°‘domçš„å¢åˆ æ¬¡æ•°ï¼Œå¯ä½¿ç”¨ å­—ç¬¦ä¸² æˆ–è€… documentFragment ä¸€æ¬¡æ€§æ’å…¥
- æé™ä¼˜åŒ–æ—¶ï¼Œä¿®æ”¹æ ·å¼å¯å°†å…¶display: noneåä¿®æ”¹
- é¿å…å¤šæ¬¡è§¦å‘ä¸Šé¢æåˆ°çš„é‚£äº›ä¼šè§¦å‘å›æµçš„æ–¹æ³•ï¼Œå¯ä»¥çš„è¯å°½é‡ç”¨ å˜é‡å­˜ä½

### asyncå’Œdeferçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«?

defer å’Œ async å±æ€§çš„åŒºåˆ«ï¼š ![xxx.png](https://qiniu.youxiubiji.com/youxiubiji/20210507/c528c3a0-af11-11eb-bf5b-0ff6e87e9df2.png)

å…¶ä¸­è“è‰²çº¿ä»£è¡¨JavaScriptåŠ è½½ï¼›çº¢è‰²çº¿ä»£è¡¨JavaScriptæ‰§è¡Œï¼›ç»¿è‰²çº¿ä»£è¡¨ HTML è§£æ

1ï¼‰æƒ…å†µ1 <scriptsrc="script.js"> æ²¡æœ‰ defer æˆ– asyncï¼Œæµè§ˆå™¨ä¼šç«‹å³åŠ è½½å¹¶æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç­‰å¾…åç»­è½½å…¥çš„æ–‡æ¡£å…ƒç´ ï¼Œè¯»åˆ°å°±åŠ è½½å¹¶æ‰§è¡Œã€‚

2ï¼‰æƒ…å†µ2 (å¼‚æ­¥ä¸‹è½½) async å±æ€§è¡¨ç¤ºå¼‚æ­¥æ‰§è¡Œå¼•å…¥çš„ JavaScriptï¼Œä¸ defer çš„åŒºåˆ«åœ¨äºï¼Œå¦‚æœå·²ç»åŠ è½½å¥½ï¼Œå°±ä¼šå¼€å§‹æ‰§è¡Œâ€”â€”æ— è®ºæ­¤åˆ»æ˜¯ HTML è§£æé˜¶æ®µè¿˜æ˜¯ DOMContentLoaded è§¦å‘ä¹‹åã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼åŠ è½½çš„ JavaScript ä¾ç„¶ä¼šé˜»å¡ load äº‹ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œasync-script å¯èƒ½åœ¨ DOMContentLoaded è§¦å‘ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œï¼Œä½†ä¸€å®šåœ¨ load è§¦å‘ä¹‹å‰æ‰§è¡Œã€‚

3ï¼‰æƒ…å†µ3 <scriptdefersrc="script.js">(å»¶è¿Ÿæ‰§è¡Œ) defer å±æ€§è¡¨ç¤ºå»¶è¿Ÿæ‰§è¡Œå¼•å…¥çš„ JavaScriptï¼Œå³è¿™æ®µ JavaScript åŠ è½½æ—¶ HTML å¹¶æœªåœæ­¢è§£æï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹æ˜¯å¹¶è¡Œçš„ã€‚æ•´ä¸ª document è§£æå®Œæ¯•ä¸” defer-script ä¹ŸåŠ è½½å®Œæˆä¹‹åï¼ˆè¿™ä¸¤ä»¶äº‹æƒ…çš„é¡ºåºæ— å…³ï¼‰ï¼Œä¼šæ‰§è¡Œæ‰€æœ‰ç”± defer-script åŠ è½½çš„ JavaScript ä»£ç ï¼Œç„¶åè§¦å‘ DOMContentLoaded äº‹ä»¶ã€‚

defer ä¸ç›¸æ¯”æ™®é€š scriptï¼Œæœ‰ä¸¤ç‚¹åŒºåˆ«ï¼š

- è½½å…¥ JavaScript æ–‡ä»¶æ—¶ä¸é˜»å¡ HTML çš„è§£æï¼Œæ‰§è¡Œé˜¶æ®µè¢«æ”¾åˆ° HTML æ ‡ç­¾è§£æå®Œæˆä¹‹åï¼›
- åœ¨åŠ è½½å¤šä¸ªJSè„šæœ¬çš„æ—¶å€™ï¼Œasyncæ˜¯æ— é¡ºåºçš„åŠ è½½ï¼Œè€Œdeferæ˜¯æœ‰é¡ºåºçš„åŠ è½½

jsä¼˜åŒ–å¯ä»¥åœ¨scriptæ ‡ç­¾åŠ ä¸Š deferå±æ€§ å’Œ asyncå±æ€§ç”¨äºåœ¨ä¸é˜»å¡é¡µé¢æ–‡æ¡£è§£æçš„å‰æä¸‹ï¼Œæ§åˆ¶è„šæœ¬çš„ä¸‹è½½å’Œæ‰§è¡Œ

> å…¶ä»–: CSS æ ‡ç­¾çš„ relå±æ€§ ä¸­çš„å±æ€§å€¼è®¾ç½®ä¸º preload èƒ½å¤Ÿè®©ä½ åœ¨ä½ çš„HTMLé¡µé¢ä¸­å¯ä»¥æŒ‡æ˜å“ªäº›èµ„æºæ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåå³åˆ»éœ€è¦çš„,æœ€ä¼˜çš„é…ç½®åŠ è½½é¡ºåºï¼Œæé«˜æ¸²æŸ“æ€§èƒ½

### é¦–å±ä¼˜åŒ–åŠ è½½

- å‡å°‘é¦–å± CGI çš„è®¡ç®—é‡ï¼šæ¯”å¦‚åœ¨å¾®ä¿¡8.8æ— ç°é‡‘æ—¥H5å¼€å‘ä¸­ï¼Œå‰ç«¯å¸Œæœ›æ‹¿åˆ°ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€æ¶ˆè´¹è®°å½•ã€æ’åä¸‰ç±»æ•°æ®ï¼Œå¦‚æœåªé€šè¿‡ä¸€ä¸ªCGIæ¥å¤„ç†ï¼Œé‚£ä¹ˆåå°å“åº”æ—¶é—´è‚¯å®šä¼šå˜é•¿ï¼›ç”±äºåœ¨H5çš„é¦–å±ä¸­ï¼ŒåªåŒ…å«äº†ç”¨æˆ·ä¿¡æ¯ï¼Œæ¶ˆè´¹è®°å½•ã€æ’åéƒ½åœ¨ç¬¬2å±å’Œç¬¬3å±ï¼Œæ­¤æ—¶å…¶å®å¯ä»¥==åˆ©ç”¨å¼‚æ­¥çš„æ–¹å¼==æ¥æ‹¿æ¶ˆè´¹è®°å½•ã€æ’åçš„æ•°æ®ã€‚
- é¡µé¢ç˜¦èº«ï¼šå‹ç¼©HTMLã€CSSã€JavaScriptã€‚
- å‡å°‘è¯·æ±‚ï¼šCSSã€JavaScriptæ–‡ä»¶æ•°å°½é‡å°‘ï¼Œç”šè‡³å½“CSSã€JSçš„ä»£ç ä¸å¤šæ—¶ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥å°†ä»£ç å†…åµŒåˆ°é¡µé¢ä¸­ã€‚
- å¤šç”¨ç¼“å­˜ï¼šç¼“å­˜èƒ½å¤§å¹…åº¦é™ä½é¡µé¢éé¦–æ¬¡åŠ è½½çš„æ—¶é—´ã€‚
- å°‘ç”¨tableå¸ƒå±€ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“tableæ—¶ä¼šæ¶ˆè€—è¾ƒå¤šèµ„æºï¼Œè€Œä¸”åªæœ‰tableé‡Œæœ‰ä¸€ç‚¹å˜åŒ–ï¼Œæ•´ä¸ªtableéƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚
- åšé¢„åŠ è½½ï¼šéƒ¨åˆ†H5é¡µé¢é¦–å±å¯èƒ½è¦ä¸‹è½½è¾ƒå¤šçš„é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œè¿™æ—¶ä¸ºäº†é¿å…åŠ è½½æ—¶å‡ºç°â€œéš¾çœ‹â€çš„é¡µé¢ï¼Œç”¨é¢„åŠ è½½ï¼ˆloadingçš„æ–¹å¼ï¼‰åšä¸€ä¸ªè¿‡æ¸¡

### æ€»ç»“

å¾—å‡ºç»“è®ºï¼š æµè§ˆå™¨æ¸²æŸ“çš„å…³é”®è·¯å¾„å…±åˆ†äº”ä¸ªæ­¥éª¤ï¼š

> æ„å»º DOM -> æ„å»º CSSOM -> æ„å»ºæ¸²æŸ“æ ‘ -> å¸ƒå±€ -> ç»˜åˆ¶





# æœ¬åœ°å­˜å‚¨

1. æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­
2. è®¾ç½®ã€è¯»å–æ–¹ä¾¿ã€ç”šè‡³é¡µé¢åˆ·æ–°ä¸ä¸¢å¤±æ•°æ®
3. å®¹é‡è¾ƒå¤§ï¼ŒsessionStorageçº¦5Mã€localStorageçº¦20M
4. åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œå¯ä»¥å°†å¯¹è±¡JSON.stringify()ç¼–ç¨‹åå­˜å‚¨

## window.sessionStorage

1. ç”Ÿå‘½å‘¨æœŸä¸ºå…³é—­æµè§ˆå™¨çª—å£
2. åœ¨åŒä¸€ä¸ªçª—å£ä¸‹æ•°æ®å¯ä»¥å…±äº«
3. ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨ä½¿ç”¨

```js
//å­˜å‚¨æ•°æ®ï¼š
sessionStorage.setItem(key,value)
//è·å–æ•°æ®ï¼š
sessionStorage.getItem(key)
//åˆ é™¤æ•°æ®ï¼š
sessionStorage.removeItem(key)
//åˆ é™¤æ‰€æœ‰æ•°æ®ï¼š
sessionStorage.clear()
```

## window.localStorage

1. ç”Ÿå‘½å‘¨æœŸæ°¸ä¹…ç”Ÿæ•ˆï¼Œé™¤éæ‰‹åŠ¨åˆ é™¤å¦åˆ™å…³é—­é¡µé¢ä¹Ÿä¼šå­˜åœ¨ã€‚
2. å¯ä»¥å¤šçª—å£/é¡µé¢å…±äº«ï¼ˆåŒä¸€æµè§ˆå™¨å¯ä»¥å…±äº«ï¼‰
3. ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨ä½¿ç”¨

```js
//å­˜å‚¨æ•°æ®
localStorage.setItem(key,value)
//è·å–æ•°æ®
localStorage.getItem(key)
//åˆ é™¤æ•°æ®
localStorage.removeItem(key)
//åˆ é™¤æ‰€æœ‰æ•°æ®
localStorage.clear()
```



